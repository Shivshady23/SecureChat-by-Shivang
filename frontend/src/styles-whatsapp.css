/*
 * Section Map
 * - Global imports/variables (if any)
 * - Reusable style blocks
 * - Component/page specific styles
 */

@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");

:root {
  --whatsapp-green: #5465FF;
  --whatsapp-green-dark: #4354E8;
  --accent-cyan: #00FFD4;
  --accent-light: #D2DDFF;
  --whatsapp-bg: #EEF3FF;
  --whatsapp-panel: #F7F9FF;
  --whatsapp-text: #050208;
  --whatsapp-text-secondary: #3F4974;
  --whatsapp-border: #C0CCF9;
  --whatsapp-hover: #DDE6FF;
  --whatsapp-message-own: #5465FF;
  --whatsapp-message-own-text: #fff;
  --whatsapp-message-other: #D2DDFF;
  --sidebar-width: 360px;
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.12);
}

/* Dark theme overrides */
:root.theme-dark {
  --whatsapp-green: #5465FF;
  --whatsapp-green-dark: #4354E8;
  --accent-cyan: #00FFD4;
  --accent-light: #D2DDFF;
  --whatsapp-bg: #050208;
  --whatsapp-panel: #0D1330;
  --whatsapp-text: #F4F7FF;
  --whatsapp-text-secondary: #A9B5DD;
  --whatsapp-border: #27316A;
  --whatsapp-hover: #1A2351;
  --whatsapp-message-own: #5465FF;
  --whatsapp-message-own-text: #fff;
  --whatsapp-message-other: #131B3C;
  --sidebar-width: 360px;
  --shadow-sm: 0 1px 6px rgba(0, 0, 0, 0.6);
  --shadow-md: 0 4px 18px rgba(0, 0, 0, 0.6);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  color: var(--whatsapp-text);
  background: var(--whatsapp-bg);
}

#root {
  width: 100%;
  height: 100%;
}

/* Chat App Layout */
.chat-app {
  display: flex;
  height: 100vh;
  width: 100%;
  background: var(--whatsapp-bg);   
}

.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: var(--whatsapp-bg);
  overflow: hidden;
  position: relative;
}

.chat-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--whatsapp-panel);
}

/* Sidebar Styling */
.sidebar {
  width: var(--sidebar-width);
  height: 100vh;
  background: var(--whatsapp-panel);
  border-right: 1px solid var(--whatsapp-border);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.sidebar.sidebar-shell {
  flex-direction: row;
  background: #111417;
  border-right: 1px solid #25313f;
}

.sidebar-rail {
  width: 74px;
  flex-shrink: 0;
  background: #1a2026;
  border-right: 1px solid #2b343e;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding: 14px 8px 12px 8px;
}

.rail-btn,
.rail-profile-btn {
  width: 44px;
  height: 44px;
  border: 1px solid #324150;
  border-radius: 14px;
  background: #202830;
  color: #c9d4df;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.2s ease, border-color 0.2s ease, background 0.2s ease, color 0.2s ease;
  position: relative;
}

.rail-btn:hover,
.rail-profile-btn:hover {
  border-color: #25d366;
  color: #f6faff;
  transform: translateY(-1px);
}

.rail-btn.active {
  border-color: #25d366;
  background: #1b2d28;
  color: #edfff5;
}

.rail-icon {
  font-size: 1.15rem;
  line-height: 1;
}

.rail-badge {
  position: absolute;
  top: -7px;
  right: -5px;
  min-width: 20px;
  padding: 2px 6px;
  border-radius: 999px;
  color: #08140f;
  font-size: 0.72rem;
  font-weight: 700;
  border: 2px solid #1a2026;
}

.rail-badge.success {
  background: #29d46b;
}

.rail-badge.danger {
  background: #ff5466;
  color: #fff;
}

.rail-dot {
  position: absolute;
  right: 6px;
  bottom: 6px;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #2bdc7a;
}

.rail-divider {
  width: 42px;
  height: 1px;
  background: #33414f;
  margin: 2px 0 4px 0;
}

.rail-profile-btn {
  margin-top: auto;
  border-radius: 999px;
  width: 46px;
  height: 46px;
}

.rail-logout-btn {
  margin-top: auto;
}

.sidebar-shell .rail-profile-btn {
  margin-top: 6px;
}

.rail-profile-avatar {
  width: 38px;
  height: 38px;
  border-radius: 999px;
  background: #5465ff;
  color: #fff;
  font-weight: 700;
  font-size: 1rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.sidebar-panel {
  flex: 1;
  min-width: 0;
  background: #111417;
  display: flex;
  flex-direction: column;
}

.sidebar-panel-scroll {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
}

.panel-section-title {
  padding: 16px 14px 8px 14px;
  color: #f0f5fa;
  font-size: 1.32rem;
  font-weight: 700;
}

.sidebar-header {
  padding: 16px;
  background: var(--whatsapp-bg);
  border-bottom: 1px solid var(--whatsapp-border);
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.sidebar-header-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 2px;
}

.sidebar-header-content {
  min-width: 0;
  flex: 1;
}

.sidebar-header-content h1 {
  font-size: 1.5rem;
  font-weight: 700;
  margin: 0;
  color: var(--whatsapp-text);
}

.user-greeting {
  font-size: 0.85rem;
  color: var(--whatsapp-text-secondary);
  margin-top: 4px;
}

.custom-status-row {
  margin-top: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.profile-photo-row {
  margin-top: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.sidebar-profile-avatar {
  width: 42px;
  height: 42px;
  border-radius: 50%;
  background: var(--whatsapp-green);
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  overflow: hidden;
}

.profile-photo-actions {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.profile-photo-btn {
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-panel);
  color: var(--whatsapp-text-secondary);
  border-radius: 999px;
  padding: 5px 10px;
  font-size: 0.72rem;
  cursor: pointer;
}

.profile-photo-btn:hover {
  border-color: var(--whatsapp-green);
  color: var(--whatsapp-green);
}

.profile-photo-btn.subtle {
  background: transparent;
}

.profile-photo-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.profile-photo-input {
  display: none;
}

.custom-status-display {
  flex: 1;
  text-align: left;
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-panel);
  color: var(--whatsapp-text-secondary);
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 0.75rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  cursor: pointer;
  transition: border-color 0.2s ease, color 0.2s ease;
}

.custom-status-display:hover {
  color: var(--whatsapp-text);
  border-color: var(--whatsapp-green);
}

.custom-status-display.static {
  cursor: default;
}

.custom-status-display.static:hover {
  color: var(--whatsapp-text-secondary);
  border-color: var(--whatsapp-border);
}

.custom-status-edit-btn {
  border: 1px solid var(--whatsapp-border);
  border-radius: 999px;
  background: transparent;
  color: var(--whatsapp-text-secondary);
  font-size: 0.72rem;
  padding: 5px 10px;
  cursor: pointer;
}

.custom-status-edit-btn:hover {
  border-color: var(--whatsapp-green);
  color: var(--whatsapp-green);
}

.custom-status-editor {
  margin-top: 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.custom-status-input {
  width: 100%;
  border: 1px solid var(--whatsapp-border);
  border-radius: 10px;
  background: var(--whatsapp-panel);
  color: var(--whatsapp-text);
  padding: 8px 10px;
  font-size: 0.8rem;
}

.custom-status-input:focus {
  outline: none;
  border-color: var(--whatsapp-green);
}

.custom-status-actions {
  display: flex;
  gap: 6px;
}

.status-btn {
  border: none;
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 0.72rem;
  font-weight: 600;
  cursor: pointer;
}

.status-btn.save {
  background: var(--whatsapp-green);
  color: #fff;
}

.status-btn.cancel {
  background: var(--whatsapp-hover);
  color: var(--whatsapp-text);
}

.status-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.theme-toggle-btn,
.logout-btn {
  width: 38px;
  height: 38px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--whatsapp-border);
  color: var(--whatsapp-text);
  font-size: 1.05rem;
  cursor: pointer;
  border-radius: 10px;
  transition: background 0.2s ease, border-color 0.2s ease;
}

.theme-toggle-btn:hover,
.logout-btn:hover {
  background: var(--whatsapp-hover);
  border-color: var(--whatsapp-green);
}

.sidebar-tabs {
  display: flex;
  gap: 0;
  padding: 0 8px;
  background: var(--whatsapp-bg);
  border-bottom: 1px solid var(--whatsapp-border);
}

.tab-button {
  flex: 1;
  background: none;
  border: none;
  padding: 12px 16px;
  cursor: pointer;
  font-weight: 500;
  color: var(--whatsapp-text-secondary);
  border-bottom: 2px solid transparent;
  transition: all 0.2s ease;
  font-size: 0.95rem;
}

.tab-button.active {
  color: var(--whatsapp-green);
  border-bottom-color: var(--whatsapp-green);
}

.tab-button.with-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.tab-badge {
  min-width: 20px;
  padding: 2px 6px;
  border-radius: 999px;
  background: var(--whatsapp-green);
  color: #fff;
  font-size: 0.72rem;
  font-weight: 600;
  line-height: 1.2;
}

.sidebar-content {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 8px;
}

.error-banner {
  background: #fee;
  color: #c33;
  padding: 12px 16px;
  border-bottom: 1px solid #fcc;
  font-size: 0.9rem;
}

/* Chat List */
.chat-list-container {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.chat-list-header {
  padding: 12px 16px;
}

.chat-list-header h2 {
  margin: 0;
  font-size: 1.4rem;
  font-weight: 700;
}

.chat-search {
  padding: 0 8px 8px 8px;
}

.search-input {
  width: 100%;
  padding: 10px 16px;
  border: 1px solid var(--whatsapp-border);
  border-radius: 20px;
  font-size: 0.95rem;
  background: var(--whatsapp-bg);
  color: var(--whatsapp-text);
  transition: all 0.2s ease;
}

.search-input:focus {
  outline: none;
  border-color: var(--whatsapp-green);
  background: var(--whatsapp-bg);
}

.chat-list {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0;
}

.empty-state {
  padding: 20px 16px;
  text-align: center;
  color: var(--whatsapp-text-secondary);
}

.empty-state p {
  margin: 8px 0;
  font-size: 0.95rem;
}

.chat-item {
  width: 100%;
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 12px;
  background: transparent;
  border: none;
  cursor: pointer;
  transition: background 0.2s ease;
  text-align: left;
  color: inherit;
  font-size: 0.95rem;
  border-bottom: 1px solid var(--whatsapp-border);
}

.chat-item:hover {
  background: var(--whatsapp-hover);
}

.chat-item.active {
  background: var(--whatsapp-hover);
}

.chat-avatar {
  min-width: 48px;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--whatsapp-green);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 1rem;
  overflow: hidden;
}

.chat-info {
  flex: 1;
  min-width: 0;
}

.chat-name {
  font-weight: 500;
  color: var(--whatsapp-text);
  margin: 0;
  flex: 1;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

@keyframes unread-name-glow {
  0%,
  100% {
    text-shadow: 0 0 0 rgba(0, 0, 0, 0);
  }
  50% {
    text-shadow: 0 0 10px rgba(0, 255, 212, 0.45);
  }
}

.chat-name-unread {
  color: var(--whatsapp-green);
  font-weight: 700;
  animation: unread-name-glow 1.6s ease-in-out infinite;
}

.chat-name-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  min-width: 0;
}

.chat-time {
  font-size: 0.75rem;
  color: var(--whatsapp-text-secondary);
  white-space: nowrap;
  flex-shrink: 0;
}

.chat-time-unread {
  color: var(--whatsapp-green);
  font-weight: 700;
}

.chat-preview {
  font-size: 0.85rem;
  color: var(--whatsapp-text-secondary);
  margin-top: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.chat-preview-unread {
  color: var(--whatsapp-text);
}

.online-indicator {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--whatsapp-green);
  flex-shrink: 0;
}

/* Requests List */
.requests-container {
  border-bottom: 1px solid var(--whatsapp-border);
  margin-bottom: 8px;
}

.requests-header {
  padding: 12px 16px;
}

.requests-header h3 {
  margin: 0;
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--whatsapp-text);
}

.requests-list {
  padding: 0;
  overflow-x: hidden;
}

.request-item {
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 12px;
  border-bottom: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-bg);
}

.request-avatar {
  min-width: 40px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--whatsapp-green);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.9rem;
  overflow: hidden;
}

.request-info {
  flex: 1;
  min-width: 0;
}

.request-name {
  font-weight: 500;
  font-size: 0.95rem;
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.request-username {
  font-size: 0.85rem;
  color: var(--whatsapp-text-secondary);
  margin: 2px 0 0 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.request-actions {
  display: flex;
  gap: 8px;
}

.request-accept, .request-reject {
  background: none;
  border: none;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1rem;
  transition: background 0.2s ease;
}

.request-accept:hover {
  background: #e8f5e9;
}

.request-reject:hover {
  background: #ffebee;
}

.request-status {
  font-size: 0.85rem;
  color: var(--whatsapp-text-secondary);
}

/* Users List */
.users-list-container {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.users-list-header {
  padding: 12px 16px;
}

.users-list-header h3 {
  margin: 0;
  font-size: 1.2rem;
  font-weight: 600;
}

.users-search {
  padding: 0 8px 8px 8px;
}

.users-list {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
}

.user-item {
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 12px;
  border-bottom: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-bg);
  transition: background 0.2s ease;
}

.user-item:hover {
  background: var(--whatsapp-hover);
}

.user-avatar {
  min-width: 40px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--whatsapp-green);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.9rem;
  overflow: hidden;
}

.user-info {
  flex: 1;
  min-width: 0;
}

.user-name {
  font-weight: 500;
  font-size: 0.95rem;
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.user-username {
  font-size: 0.85rem;
  color: var(--whatsapp-text-secondary);
  margin: 2px 0 0 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.user-status {
  font-size: 0.85rem;
  color: var(--whatsapp-text-secondary);
  flex-shrink: 0;
}

.user-status.pending {
  color: var(--whatsapp-text-secondary);
}

.user-action-btn {
  background: var(--whatsapp-green);
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 20px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  transition: background 0.2s ease;
  flex-shrink: 0;
}

.user-action-btn:hover {
  background: var(--whatsapp-green-dark);
}

.sidebar-actions {
  padding: 12px;
  border-top: 1px solid var(--whatsapp-border);
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.action-btn {
  width: 100%;
  background: var(--whatsapp-green);
  color: white;
  padding: 12px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: background 0.2s ease;
}

.action-btn:hover {
  background: var(--whatsapp-green-dark);
}

.danger-btn {
  background: #c0392b;
}

.danger-btn:hover {
  background: #a93226;
}

/* Chat Header */
.chat-header {
  padding: 12px 16px;
  background: var(--whatsapp-bg);
  border-bottom: 1px solid var(--whatsapp-border);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.chat-header-info {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  min-width: 0;
  position: relative;
}

.profile-hover-anchor {
  cursor: default;
}

.profile-hover-card {
  position: absolute;
  left: 0;
  top: calc(100% + 10px);
  width: 280px;
  border-radius: 14px;
  background: var(--whatsapp-bg);
  border: 1px solid var(--whatsapp-border);
  box-shadow: var(--shadow-md);
  padding: 12px;
  opacity: 0;
  transform: translateY(6px);
  pointer-events: none;
  transition: opacity 0.22s ease, transform 0.22s ease;
  z-index: 15;
}

.profile-hover-anchor:hover .profile-hover-card {
  opacity: 1;
  transform: translateY(0);
}

.profile-hover-top {
  display: flex;
  align-items: center;
  gap: 10px;
}

.profile-hover-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--whatsapp-green);
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  overflow: hidden;
}

.profile-hover-main {
  min-width: 0;
  flex: 1;
}

.profile-hover-name {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--whatsapp-text);
}

.profile-hover-username {
  font-size: 0.78rem;
  color: var(--whatsapp-text-secondary);
}

.profile-hover-presence {
  font-size: 0.72rem;
  color: var(--whatsapp-text-secondary);
}

.profile-hover-presence.online {
  color: var(--whatsapp-green);
  font-weight: 600;
}

.profile-hover-status {
  margin-top: 10px;
  border-radius: 10px;
  background: var(--whatsapp-panel);
  border: 1px solid var(--whatsapp-border);
  padding: 8px 10px;
  font-size: 0.8rem;
  color: var(--whatsapp-text-secondary);
  line-height: 1.35;
}

.chat-header-avatar {
  flex-shrink: 0;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--whatsapp-green);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 1rem;
  overflow: hidden;
}

.chat-header-details {
  flex: 1;
  min-width: 0;
}

.chat-header-title {
  font-weight: 600;
  font-size: 1rem;
  margin: 0;
}

.chat-header-subtitle {
  font-size: 0.85rem;
  color: var(--whatsapp-text-secondary);
  margin: 2px 0 0 0;
}

.chat-header-subtitle.online {
  color: var(--whatsapp-green);
}

.chat-header-actions {
  display: flex;
  gap: 12px;
}

.header-action-btn {
  background: none;
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  transition: background 0.2s ease;
}

.header-action-btn:hover {
  background: var(--whatsapp-hover);
}

.header-action-btn.vanish-toggle.active {
  background: var(--whatsapp-green);
  color: #fff;
}

/* Message List */
.message-list {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  background: var(--whatsapp-panel);
  position: relative;
  scroll-behavior: smooth;
}

.message-day-group {
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.date-separator {
  text-align: center;
  margin: 14px 0 10px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.date-separator::before,
.date-separator::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--whatsapp-border);
}

.date-separator span {
  font-size: 0.75rem;
  color: var(--whatsapp-text-secondary);
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-bg);
}

.new-messages-divider {
  margin: 8px 0 10px;
  text-align: center;
  position: relative;
}

.new-messages-divider::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  border-top: 1px dashed var(--whatsapp-border);
}

.new-messages-divider span {
  position: relative;
  z-index: 1;
  display: inline-block;
  border-radius: 999px;
  border: 1px solid rgba(84, 101, 255, 0.5);
  background: rgba(84, 101, 255, 0.14);
  color: var(--whatsapp-green);
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  text-transform: uppercase;
  padding: 4px 10px;
}

.scroll-unread-btn {
  position: sticky;
  align-self: flex-end;
  bottom: 10px;
  margin-top: auto;
  border: none;
  border-radius: 999px;
  background: var(--whatsapp-green);
  color: #fff;
  font-size: 0.78rem;
  font-weight: 700;
  padding: 8px 12px;
  cursor: pointer;
  box-shadow: var(--shadow-md);
  z-index: 8;
}

.scroll-unread-btn:hover {
  background: var(--whatsapp-green-dark);
}

.message-row {
  display: flex;
  gap: 8px;
  margin-bottom: 2px;
}

.message-row.own {
  justify-content: flex-end;
}

.message-row.cluster-start {
  margin-top: 8px;
}

.message-row.cluster-end {
  margin-bottom: 6px;
}

.message-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--whatsapp-green);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.8rem;
  flex-shrink: 0;
  overflow: hidden;
}

.avatar-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  border-radius: inherit;
}

.message-bubble {
  max-width: 66%;
  width: fit-content;
  min-width: 0;
  border-radius: 12px;
  padding: 8px 12px;
  word-break: break-word;
  position: relative;
  border: none;
  text-align: left;
  cursor: pointer;
  transform-origin: center bottom;
}

.message-bubble.animate-entry {
  animation: bubble-in 0.18s ease both;
}

.message-bubble.selected {
  outline: 2px solid var(--whatsapp-green);
}

.message-row.other .message-bubble {
  background: var(--whatsapp-message-other);
  color: var(--whatsapp-text);
}

.message-row.own .message-bubble {
  background: var(--whatsapp-message-own);
  color: var(--whatsapp-message-own-text);
}

.message-bubble.with-tail::after {
  content: "";
  position: absolute;
  bottom: 7px;
  width: 10px;
  height: 10px;
  transform: var(--tail-transform, none);
  clip-path: polygon(0 0, 100% 50%, 0 100%);
  animation: tail-pop 0.16s ease both;
}

.message-row.other .message-bubble.with-tail::after {
  left: -6px;
  --tail-transform: scaleX(-1);
  background: var(--whatsapp-message-other);
}

.message-row.own .message-bubble.with-tail::after {
  right: -6px;
  --tail-transform: none;
  background: var(--whatsapp-message-own);
}

.message-sender-name {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--whatsapp-green);
  margin-bottom: 4px;
}

.message-text {
  font-size: 0.95rem;
  line-height: 1.4;
  margin: 0;
  color: inherit;
}

.message-file {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.file-label {
  font-size: 0.9rem;
}

.file-button {
  background: rgba(84, 101, 255, 0.1);
  color: var(--whatsapp-green);
  border: none;
  padding: 8px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: background 0.2s ease;
  text-align: left;
}

.file-button:hover {
  background: rgba(84, 101, 255, 0.2);
}

.file-size {
  font-size: 0.8rem;
  opacity: 0.7;
}

.message-time {
  font-size: 0.75rem;
  color: rgba(0, 0, 0, 0.45);
  margin-top: 4px;
  text-align: right;
}

.message-row.own .message-time {
  color: rgba(255, 255, 255, 0.9);
}

:root.theme-dark .message-row.other .message-time {
  color: rgba(255, 255, 255, 0.9);
}

.reply-preview {
  border-left: 3px solid rgba(255, 255, 255, 0.45);
  padding-left: 8px;
  margin-bottom: 6px;
  font-size: 0.8rem;
  opacity: 0.9;
  max-width: min(34ch, 100%);
}

.reply-label {
  display: block;
  font-weight: 600;
  margin-bottom: 2px;
}

.reply-text {
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.message-actions {
  display: flex;
  gap: 6px;
  justify-content: flex-end;
  margin-top: 6px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
}

.message-row:hover .message-actions {
  opacity: 1;
  pointer-events: auto;
}

.message-action-btn {
  border: none;
  border-radius: 999px;
  padding: 4px 8px;
  font-size: 0.68rem;
  cursor: pointer;
  background: rgba(0, 0, 0, 0.12);
  color: inherit;
}

.message-action-btn.danger {
  background: rgba(192, 57, 43, 0.2);
}

.pinned-banner {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 14px;
  border-bottom: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-bg);
}

.pinned-label {
  font-size: 0.75rem;
  font-weight: 700;
  color: var(--whatsapp-green);
  text-transform: uppercase;
}

.pinned-text {
  font-size: 0.88rem;
  color: var(--whatsapp-text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.selection-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 14px;
  border-bottom: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-bg);
}

.selection-text {
  font-size: 0.86rem;
  color: var(--whatsapp-text-secondary);
}

.selection-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.read-indicator {
  margin-left: 4px;
  opacity: 0.6;
  color: inherit;
}

.read-indicator.sent {
  opacity: 0.6;
}

.read-indicator.delivered {
  opacity: 0.9;
  color: inherit;
}

.read-indicator.read {
  opacity: 1;
  color: var(--accent-cyan);
}

.typing-dots {
  display: flex;
  gap: 4px;
  padding: 4px 0;
}

.typing-dots span {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.4);
  animation: typing 1.4s infinite;
}

.typing-dots span:nth-child(2) {
  animation-delay: 0.2s;
}

.typing-dots span:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes typing {
  0%, 60%, 100% {
    opacity: 0.5;
    transform: translateY(0);
  }
  30% {
    opacity: 1;
    transform: translateY(-10px);
  }
}

/* Message Composer */
.message-composer {
  padding: 16px;
  background: var(--whatsapp-bg);
  border-top: 1px solid var(--whatsapp-border);
  display: flex;
  align-items: center;
  gap: 12px;
  flex-direction: row;
  position: relative;
}

.message-composer.drag-active {
  border-color: var(--whatsapp-green);
  background: var(--whatsapp-hover);
}

.message-composer.vanish-mode {
  margin: 10px 12px 12px;
  padding: 12px 14px;
  border: 2px dashed rgba(255, 255, 255, 0.42);
  border-radius: 999px;
  background: rgba(84, 101, 255, 0.24);
}

.message-composer.vanish-mode .composer-actions {
  gap: 8px;
}

.message-composer.vanish-mode .action-button {
  background: transparent;
  border: none;
  color: #f4ecff;
}

.message-composer.vanish-mode .action-button:hover {
  background: rgba(255, 255, 255, 0.14);
}

.emoji-picker {
  position: absolute;
  bottom: 100%;
  left: 16px;
  right: auto;
  background: var(--whatsapp-bg);
  border: 1px solid var(--whatsapp-border);
  border-radius: 12px;
  padding: 8px;
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 4px;
  margin-bottom: 8px;
  max-width: calc(100% - 32px);
}

.emoji-button {
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 1.5rem;
  padding: 8px;
  border-radius: 8px;
  transition: background 0.2s ease;
}

.emoji-button:hover {
  background: rgba(0, 255, 212, 0.1);
}

.composer-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-start;
}

.composer-actions {
  color: var(--whatsapp-green);
}

.action-button {
  background: transparent;
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
  width: 40px;
  height: 40px;
  padding: 0;
  border-radius: 50%;
  transition: background 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  background: var(--whatsapp-panel);
  border: 1px solid var(--whatsapp-border);
}

.action-button:hover {
  background: var(--whatsapp-hover);
}

.message-input {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid var(--whatsapp-border);
  border-radius: 20px;
  font-size: 0.95rem;
  background: var(--whatsapp-bg);
  color: var(--whatsapp-text);
  transition: all 0.2s ease;
  width: 100%;
}

.message-input:focus {
  outline: none;
  border-color: var(--whatsapp-green);
}

.send-button {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--whatsapp-green);
  color: white;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  transition: background 0.2s ease;
  flex-shrink: 0;
}

.send-button:hover {
  background: var(--whatsapp-green-dark);
}

/* Empty State */
.empty-state {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--whatsapp-panel);
}

.empty-content {
  text-align: center;
}

.empty-content h1 {
  font-size: 2rem;
  margin: 0 0 8px 0;
  color: var(--whatsapp-text);
}

.empty-content p {
  color: var(--whatsapp-text-secondary);
  margin: 4px 0;
  font-size: 0.95rem;
}

.hint {
  margin-top: 12px;
  font-size: 0.85rem;
}

/* Profile Page */
.profile-page {
  min-height: 100vh;
  padding: 24px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  background: var(--whatsapp-bg);
}

.profile-page-background {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 14% 18%, rgba(0, 255, 212, 0.16), transparent 42%),
    radial-gradient(circle at 88% 80%, rgba(84, 101, 255, 0.2), transparent 44%),
    linear-gradient(160deg, #d2ddff 0%, #eef3ff 60%, #d8e2ff 100%);
}

:root.theme-dark .profile-page-background {
  background:
    radial-gradient(circle at 12% 14%, rgba(0, 255, 212, 0.16), transparent 40%),
    radial-gradient(circle at 86% 84%, rgba(84, 101, 255, 0.24), transparent 46%),
    linear-gradient(160deg, #050208 0%, #0c1130 60%, #141a46 100%);
}

.profile-page-card {
  position: relative;
  z-index: 1;
  width: min(760px, 100%);
  max-height: calc(100vh - 48px);
  overflow: auto;
  border-radius: 16px;
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-panel);
  box-shadow: var(--shadow-md);
}

.profile-page-top {
  padding: 22px 24px 16px 24px;
  border-bottom: 1px solid var(--whatsapp-border);
}

.profile-back-btn {
  margin-bottom: 14px;
}

.profile-page-top h1 {
  font-size: 1.5rem;
  color: var(--whatsapp-text);
  margin-bottom: 4px;
}

.profile-page-top p {
  color: var(--whatsapp-text-secondary);
  font-size: 0.92rem;
}

.profile-notice {
  margin: 16px 24px 0 24px;
  border: 1px solid rgba(84, 101, 255, 0.32);
  background: rgba(84, 101, 255, 0.1);
  color: var(--whatsapp-text);
  border-radius: 8px;
  padding: 10px 12px;
  font-size: 0.88rem;
}

.profile-page-body {
  padding: 18px 24px 24px 24px;
  display: flex;
  flex-direction: column;
  gap: 18px;
}

.profile-page-avatar-row {
  display: flex;
  align-items: center;
  gap: 14px;
  flex-wrap: wrap;
}

.profile-page-avatar {
  width: 84px;
  height: 84px;
  border-radius: 50%;
  background: var(--whatsapp-green);
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 1.9rem;
  overflow: hidden;
  border: 2px solid var(--whatsapp-border);
}

.profile-page-avatar-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.profile-readonly-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}

.profile-status-input {
  resize: vertical;
  min-height: 94px;
  line-height: 1.4;
}

.profile-form-footer {
  margin-top: 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.profile-char-count {
  font-size: 0.82rem;
  color: var(--whatsapp-text-secondary);
}

.profile-danger-zone {
  border: 1px solid #f4b6b6;
  border-radius: 10px;
  padding: 14px;
  background: #fff2f2;
}

:root.theme-dark .profile-danger-zone {
  border-color: #7f3030;
  background: rgba(127, 48, 48, 0.2);
}

.profile-danger-zone h2 {
  margin-bottom: 4px;
  font-size: 1rem;
  color: var(--whatsapp-text);
}

.profile-danger-zone p {
  margin-bottom: 12px;
  font-size: 0.88rem;
  color: var(--whatsapp-text-secondary);
}

/* Modal Styles */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal-content {
  background: var(--whatsapp-bg);
  border-radius: 12px;
  box-shadow: var(--shadow-md);
  max-width: 500px;
  width: 90%;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
}

.message-composer.vanish-mode .message-input.vanish-input {
  border: none;
  border-radius: 0;
  background: transparent;
  color: #f2effa;
  font-size: 1rem;
}

.message-composer.vanish-mode .message-input.vanish-input::placeholder {
  color: rgba(242, 239, 250, 0.65);
}

.message-composer.vanish-mode .message-input.vanish-input:focus {
  border: none;
}

.upload-preview {
  position: absolute;
  left: 12px;
  right: 12px;
  bottom: calc(100% + 8px);
  background: var(--whatsapp-bg);
  border: 1px solid var(--whatsapp-border);
  border-radius: 12px;
  box-shadow: var(--shadow-md);
  padding: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  z-index: 5;
}

.replying-banner {
  position: absolute;
  left: 12px;
  right: 12px;
  bottom: calc(100% + 8px);
  background: var(--whatsapp-bg);
  border: 1px solid var(--whatsapp-border);
  border-radius: 10px;
  padding: 8px 10px;
  display: flex;
  align-items: center;
  gap: 8px;
  z-index: 6;
}

.replying-content {
  min-width: 0;
}

.replying-title {
  font-size: 0.76rem;
  font-weight: 600;
  color: var(--whatsapp-green);
}

.replying-text {
  font-size: 0.85rem;
  color: var(--whatsapp-text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.replying-close {
  margin-left: auto;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 1px solid var(--whatsapp-border);
  background: transparent;
  color: var(--whatsapp-text-secondary);
  cursor: pointer;
}

.upload-preview-image {
  width: 72px;
  height: 72px;
  object-fit: cover;
  border-radius: 10px;
  border: 1px solid var(--whatsapp-border);
}

.upload-preview-file {
  flex: 1;
  font-size: 0.9rem;
  color: var(--whatsapp-text);
  word-break: break-word;
}

.upload-preview-actions {
  margin-left: auto;
  display: flex;
  gap: 8px;
}

.modal-header {
  padding: 20px;
  border-bottom: 1px solid var(--whatsapp-border);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-header h2 {
  margin: 0;
  font-size: 1.2rem;
}

.modal-close {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  transition: background 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-close:hover {
  background: var(--whatsapp-hover);
}

.modal-body {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.modal-footer {
  padding: 20px;
  border-top: 1px solid var(--whatsapp-border);
  display: flex;
  gap: 12px;
  justify-content: flex-end;
}

.confirm-modal {
  max-width: 440px;
}

.chat-info-modal {
  max-width: 720px;
}

.chat-info-grid {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.chat-info-profile {
  display: flex;
  justify-content: center;
  padding: 8px 0 12px;
}

.chat-info-profile-avatar {
  width: 88px;
  height: 88px;
  border-radius: 50%;
  overflow: hidden;
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-bg);
  color: var(--whatsapp-text);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.4rem;
  font-weight: 700;
}

.group-profile-editor {
  display: flex;
  flex-direction: column;
  gap: 14px;
  padding: 12px;
  border: 1px solid var(--whatsapp-border);
  border-radius: 12px;
  background: var(--whatsapp-panel);
}

.group-avatar-editor {
  display: flex;
  align-items: center;
  gap: 14px;
}

.group-avatar-preview {
  width: 68px;
  height: 68px;
  border-radius: 50%;
  overflow: hidden;
  flex-shrink: 0;
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-bg);
  color: var(--whatsapp-text);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.15rem;
  font-weight: 700;
}

.group-avatar-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.group-avatar-actions .btn-secondary {
  padding: 8px 12px;
}

.group-motive-input {
  min-height: 72px;
  resize: vertical;
}

.group-save-actions {
  display: flex;
  justify-content: flex-end;
}

.info-row {
  display: flex;
  justify-content: space-between;
  gap: 16px;
  padding: 8px 0;
  border-bottom: 1px solid var(--whatsapp-border);
}

.info-label {
  font-weight: 600;
  color: var(--whatsapp-text-secondary);
}

.info-value {
  color: var(--whatsapp-text);
  word-break: break-word;
  text-align: right;
  flex: 1;
}

.members-list.compact {
  max-height: 220px;
  overflow-y: auto;
  border: 1px solid var(--whatsapp-border);
  border-radius: 10px;
  padding: 8px;
  background: var(--whatsapp-panel);
}

.member-pill {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  padding: 10px 12px;
  border-radius: 8px;
  background: var(--whatsapp-bg);
  color: var(--whatsapp-text);
  margin-bottom: 6px;
}

.member-pill.with-actions {
  align-items: center;
}

.member-pill-actions {
  display: inline-flex;
  align-items: center;
  justify-content: flex-end;
  gap: 8px;
  flex-wrap: wrap;
}

.member-badge {
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(0, 255, 212, 0.35);
  color: var(--whatsapp-green);
  font-size: 0.72rem;
  font-weight: 700;
}

.member-remove-btn {
  border: 1px solid rgba(224, 87, 91, 0.45);
  background: rgba(224, 87, 91, 0.12);
  color: #e0575b;
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 0.76rem;
  font-weight: 600;
  cursor: pointer;
}

.member-remove-btn:hover {
  background: rgba(224, 87, 91, 0.2);
}

.member-remove-btn:disabled {
  opacity: 0.65;
  cursor: not-allowed;
}

.member-pill .muted {
  color: var(--whatsapp-text-secondary);
}

.info-actions {
  justify-content: flex-end;
}

@media (max-width: 700px) {
  .chat-info-modal {
    width: min(94vw, 680px);
  }

  .group-avatar-editor {
    flex-direction: column;
    align-items: flex-start;
  }

  .info-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
  }

  .info-value {
    text-align: left;
  }

  .member-pill.with-actions {
    flex-direction: column;
    align-items: flex-start;
  }

  .member-pill-actions {
    justify-content: flex-start;
  }
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  font-weight: 600;
  margin-bottom: 8px;
  color: var(--whatsapp-text);
}

.form-input {
  width: 100%;
  padding: 12px;
  border: 1px solid var(--whatsapp-border);
  border-radius: 8px;
  font-size: 0.95rem;
  background: var(--whatsapp-bg);
  color: var(--whatsapp-text);
  transition: border-color 0.2s ease;
}

.form-input:focus {
  outline: none;
  border-color: var(--whatsapp-green);
}

.members-list {
  max-height: 300px;
  overflow-y: auto;
  border: 1px solid var(--whatsapp-border);
  border-radius: 8px;
  padding: 8px;
}

.checkbox-item {
  display: flex;
  align-items: center;
  padding: 12px;
  cursor: pointer;
  gap: 12px;
  transition: background 0.2s ease;
  border-radius: 6px;
}

.checkbox-item:hover {
  background: var(--whatsapp-hover);
}

.checkbox-item input[type="checkbox"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
  accent-color: var(--whatsapp-green);
}

.checkbox-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--whatsapp-green);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.9rem;
  flex-shrink: 0;
}

.checkbox-label {
  flex: 1;
}

.checkbox-label div:first-child {
  font-weight: 500;
  margin-bottom: 2px;
}

.checkbox-label .muted {
  font-size: 0.85rem;
  color: var(--whatsapp-text-secondary);
}

.selected-count {
  padding: 12px;
  text-align: center;
  color: var(--whatsapp-text-secondary);
  font-size: 0.9rem;
  border-top: 1px solid var(--whatsapp-border);
}

.btn-primary, .btn-secondary {
  padding: 12px 24px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-primary {
  background: var(--whatsapp-green);
  color: white;
}

.btn-primary:hover {
  background: var(--whatsapp-green-dark);
}

.btn-primary.confirm-danger {
  background: #c0392b;
}

.btn-primary.confirm-danger:hover {
  background: #a93226;
}

.btn-secondary {
  background: var(--whatsapp-hover);
  color: var(--whatsapp-text);
}

.btn-secondary:hover {
  background: #e8e8e8;
}

.group-form-error {
  margin-bottom: 12px;
  border-radius: 8px;
  border: 1px solid #f4b6b6;
  background: #ffe6e6;
  color: #962c2c;
  padding: 10px 12px;
  font-size: 0.88rem;
}

.setting-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 14px;
  padding: 10px 0;
  border-bottom: 1px solid var(--whatsapp-border);
  color: var(--whatsapp-text);
}

.setting-row input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: var(--whatsapp-green);
}

.desktop-perm-btn {
  margin-top: 14px;
}

.push-toast-stack {
  position: absolute;
  top: 12px;
  right: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  z-index: 50;
  max-width: 320px;
}

.push-toast {
  background: var(--whatsapp-bg);
  color: var(--whatsapp-text);
  border: 1px solid var(--whatsapp-border);
  border-left: 4px solid var(--whatsapp-green);
  border-radius: 10px;
  box-shadow: var(--shadow-md);
  padding: 10px 12px;
}

.push-toast-title {
  font-weight: 600;
  font-size: 0.9rem;
}

.push-toast-body {
  margin-top: 2px;
  color: var(--whatsapp-text-secondary);
  font-size: 0.85rem;
}

/* Scrollbar Styling */
.sidebar::-webkit-scrollbar,
.chat-list::-webkit-scrollbar,
.message-list::-webkit-scrollbar,
.users-list::-webkit-scrollbar,
.members-list::-webkit-scrollbar {
  width: 8px;
}

.sidebar::-webkit-scrollbar-track,
.chat-list::-webkit-scrollbar-track,
.message-list::-webkit-scrollbar-track,
.users-list::-webkit-scrollbar-track,
.members-list::-webkit-scrollbar-track {
  background: transparent;
}

.sidebar::-webkit-scrollbar-thumb,
.chat-list::-webkit-scrollbar-thumb,
.message-list::-webkit-scrollbar-thumb,
.users-list::-webkit-scrollbar-thumb,
.members-list::-webkit-scrollbar-thumb {
  background: #ccc;
  border-radius: 4px;
}

.sidebar::-webkit-scrollbar-thumb:hover,
.chat-list::-webkit-scrollbar-thumb:hover,
.message-list::-webkit-scrollbar-thumb:hover,
.users-list::-webkit-scrollbar-thumb:hover,
.members-list::-webkit-scrollbar-thumb:hover {
  background: #999;
}

/* Muted Text */
.muted-text {
  color: var(--whatsapp-text-secondary);
  font-size: 0.85rem;
}

/* Auth Pages */
.auth {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  position: relative;
  overflow: hidden;
}

.auth-background {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 12% 20%, rgba(0, 255, 212, 0.18), transparent 42%),
    radial-gradient(circle at 88% 82%, rgba(84, 101, 255, 0.2), transparent 46%),
    linear-gradient(160deg, #d2ddff 0%, #eef3ff 55%, #d8e2ff 100%);
}

:root.theme-dark .auth-background {
  background:
    radial-gradient(circle at 10% 14%, rgba(0, 255, 212, 0.18), transparent 42%),
    radial-gradient(circle at 86% 86%, rgba(84, 101, 255, 0.24), transparent 45%),
    linear-gradient(160deg, #050208 0%, #0c1130 55%, #141a46 100%);
}

.auth-card {
  position: relative;
  z-index: 1;
  width: 100%;
  max-width: 460px;
  padding: 28px;
  border-radius: 16px;
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-panel);
  box-shadow: var(--shadow-md);
}

.auth-theme-row {
  display: flex;
  justify-content: flex-end;
  margin-bottom: 8px;
}

.auth-theme-toggle {
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-bg);
  color: var(--whatsapp-text-secondary);
  border-radius: 999px;
  padding: 6px 12px;
  font-size: 0.8rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.auth-theme-toggle:hover {
  color: var(--whatsapp-text);
  background: var(--whatsapp-hover);
}

.auth-header {
  text-align: center;
  margin-bottom: 20px;
}

.auth-icon {
  font-size: 2.4rem;
  margin-bottom: 8px;
}

.auth-card h1 {
  margin: 0 0 8px 0;
  color: var(--whatsapp-text);
}

.auth-subtitle {
  margin: 0;
  color: var(--whatsapp-text-secondary);
  font-size: 0.95rem;
}

.tab-icon {
  margin-right: 6px;
}

.auth-form {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.auth-form .form-group {
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.auth-form .form-group label {
  margin: 0;
  font-size: 0.86rem;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  color: var(--whatsapp-text-secondary);
}

.input-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-bg);
  border-radius: 10px;
  padding: 0 12px;
  transition: border-color 0.2s ease, background 0.2s ease;
}

.input-wrapper:focus-within {
  border-color: var(--whatsapp-green);
  background: var(--whatsapp-panel);
}

.input-icon {
  color: var(--whatsapp-text-secondary);
  font-size: 1rem;
}

.input-wrapper input {
  width: 100%;
  border: none;
  outline: none;
  background: transparent;
  color: var(--whatsapp-text);
  padding: 12px 0;
  margin: 0;
  font-size: 0.95rem;
}

.input-wrapper input::placeholder {
  color: var(--whatsapp-text-secondary);
}

.password-toggle {
  border: none;
  background: transparent;
  box-shadow: none;
  color: var(--whatsapp-text-secondary);
  width: 28px;
  min-width: 28px;
  height: 28px;
  padding: 0;
  margin: 0;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.password-toggle:hover:not(:disabled) {
  background: rgba(84, 101, 255, 0.12);
  color: var(--whatsapp-text);
}

.password-toggle:focus-visible {
  outline: 2px solid rgba(84, 101, 255, 0.45);
  outline-offset: 1px;
}

.password-toggle:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

.password-toggle-icon {
  width: 16px;
  height: 16px;
  display: block;
  fill: none;
  stroke: currentColor;
  stroke-width: 1.5;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.auth-button {
  width: 100%;
  margin-top: 4px;
  border: none;
  border-radius: 10px;
  padding: 12px 14px;
  font-size: 0.95rem;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(135deg, var(--whatsapp-green) 0%, var(--whatsapp-green-dark) 100%);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
}

.auth-button:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 10px 20px rgba(84, 101, 255, 0.35);
}

.auth-button:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.button-arrow {
  font-size: 1.1rem;
}

.loading {
  opacity: 0.9;
}

.auth-footer {
  margin-top: 18px;
  text-align: center;
  color: var(--whatsapp-text-secondary);
  font-size: 0.92rem;
}

.auth-footer p {
  margin: 0;
}

.auth-footer a {
  color: var(--whatsapp-green);
  font-weight: 600;
  text-decoration: none;
}

.auth-footer a:hover {
  text-decoration: underline;
}

.security-note {
  margin-top: 14px;
  border: 1px solid var(--whatsapp-border);
  border-radius: 10px;
  background: var(--whatsapp-bg);
  color: var(--whatsapp-text-secondary);
  padding: 10px 12px;
  font-size: 0.85rem;
  line-height: 1.45;
}

.error {
  margin-bottom: 12px;
  border-radius: 8px;
  border: 1px solid #f4b6b6;
  background: #ffe6e6;
  color: #962c2c;
  padding: 10px 12px;
  font-size: 0.88rem;
}

@media (max-width: 560px) {
  .auth {
    padding: 14px;
  }

  .auth-card {
    padding: 18px;
  }

  .profile-page {
    padding: 10px;
  }

  .profile-page-card {
    max-height: 100vh;
    border-radius: 12px;
  }

  .profile-page-top,
  .profile-page-body {
    padding-left: 16px;
    padding-right: 16px;
  }

  .profile-readonly-grid {
    grid-template-columns: 1fr;
  }
}

@keyframes bubble-in {
  from {
    opacity: 0;
    transform: translateY(6px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes tail-pop {
  from {
    opacity: 0;
    transform: var(--tail-transform, none) scale(0.6);
  }
  to {
    opacity: 1;
    transform: var(--tail-transform, none) scale(1);
  }
}

.message-skeleton-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.message-skeleton-row {
  display: flex;
  gap: 8px;
  align-items: flex-end;
}

.message-skeleton-row.own {
  justify-content: flex-end;
}

.message-skeleton-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(90deg, var(--whatsapp-border), var(--whatsapp-hover), var(--whatsapp-border));
  background-size: 200% 100%;
  animation: shimmer 1.2s linear infinite;
}

.message-skeleton-row.own .message-skeleton-avatar {
  display: none;
}

.message-skeleton-bubble {
  width: min(260px, 66%);
  border-radius: 12px;
  padding: 10px;
  background: linear-gradient(90deg, var(--whatsapp-border), var(--whatsapp-hover), var(--whatsapp-border));
  background-size: 200% 100%;
  animation: shimmer 1.2s linear infinite;
}

.message-skeleton-line {
  height: 8px;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.52);
  margin-bottom: 6px;
}

.message-skeleton-line:last-child {
  margin-bottom: 0;
}

.message-skeleton-line.short {
  width: 58%;
}

@keyframes shimmer {
  from {
    background-position: 200% 0;
  }
  to {
    background-position: -200% 0;
  }
}

/* --- Sidebar Redesign (WhatsApp-like) --- */
.sidebar.sidebar-shell {
  flex-direction: row;
  background: #111417;
  border-right: 1px solid #25313f;
}

.sidebar-shell .sidebar-rail {
  width: 74px;
  flex-shrink: 0;
  background: #1a2026;
  border-right: 1px solid #2b343e;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding: 14px 8px 12px 8px;
}

.sidebar-shell .rail-btn,
.sidebar-shell .rail-profile-btn {
  width: 44px;
  height: 44px;
  border: 1px solid #324150;
  border-radius: 14px;
  background: #202830;
  color: #c9d4df;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.2s ease, border-color 0.2s ease, background 0.2s ease, color 0.2s ease;
  position: relative;
}

.sidebar-shell .rail-btn:hover,
.sidebar-shell .rail-profile-btn:hover {
  border-color: #25d366;
  color: #f6faff;
  transform: translateY(-1px);
}

.sidebar-shell .rail-btn.active {
  border-color: #25d366;
  background: #1b2d28;
  color: #edfff5;
}

.sidebar-shell .rail-icon {
  font-size: 1.15rem;
  line-height: 1;
}

.sidebar-shell .rail-badge {
  position: absolute;
  top: -7px;
  right: -5px;
  min-width: 20px;
  padding: 2px 6px;
  border-radius: 999px;
  color: #08140f;
  font-size: 0.72rem;
  font-weight: 700;
  border: 2px solid #1a2026;
}

.sidebar-shell .rail-badge.success {
  background: #29d46b;
}

.sidebar-shell .rail-badge.danger {
  background: #ff5466;
  color: #fff;
}

.sidebar-shell .rail-dot {
  position: absolute;
  right: 6px;
  bottom: 6px;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #2bdc7a;
}

.sidebar-shell .rail-divider {
  width: 42px;
  height: 1px;
  background: #33414f;
  margin: 2px 0 4px 0;
}

.sidebar-shell .rail-profile-btn {
  margin-top: auto;
  border-radius: 999px;
  width: 46px;
  height: 46px;
}

.sidebar-shell .rail-footer {
  margin-top: auto;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}

.sidebar-shell .rail-footer .rail-logout-btn,
.sidebar-shell .rail-footer .rail-profile-btn {
  margin-top: 0 !important;
}

.sidebar-shell .rail-profile-avatar {
  width: 38px;
  height: 38px;
  border-radius: 999px;
  background: #5465ff;
  color: #fff;
  font-weight: 700;
  font-size: 1rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.sidebar-shell .sidebar-panel {
  flex: 1;
  min-width: 0;
  background: #111417;
  display: flex;
  flex-direction: column;
}

.sidebar-shell .sidebar-panel-scroll {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
}

.sidebar-shell .panel-section-title {
  padding: 16px 14px 8px 14px;
  color: #f0f5fa;
  font-size: 1.32rem;
  font-weight: 700;
}

.sidebar-shell .error-banner {
  background: #341d25;
  border-bottom: 1px solid #5d2e3b;
  color: #ffccd5;
}

.sidebar-shell .chat-list-container.modern {
  padding: 14px 12px 12px 12px;
  background: #111417;
}

.sidebar-shell .chat-list-header.modern {
  padding: 4px 2px 10px 2px;
}

.sidebar-shell .chat-list-title-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.sidebar-shell .chat-list-container.modern .chat-list-header h2 {
  font-size: 2rem;
  color: #f2f7ff;
}

.sidebar-shell .chat-list-top-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.sidebar-shell .chat-header-icon-btn {
  width: 34px;
  height: 34px;
  border-radius: 10px;
  border: 1px solid #2f3c49;
  background: #1a222a;
  color: #d6e0ea;
  font-size: 1.1rem;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.sidebar-shell .chat-header-create-btn {
  width: auto;
  min-height: 34px;
  padding: 0 12px;
  font-size: 0.8rem;
  font-weight: 600;
  line-height: 1.1;
}

.sidebar-shell .chat-header-icon-btn:hover {
  border-color: #25d366;
  color: #f0fff7;
}

.sidebar-shell .chat-list-menu-wrap {
  position: relative;
}

.sidebar-shell .chat-list-menu {
  position: absolute;
  top: calc(100% + 6px);
  right: 0;
  min-width: 190px;
  padding: 6px;
  border-radius: 12px;
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-bg);
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.26);
  z-index: 30;
}

.sidebar-shell .chat-list-menu-item {
  width: 100%;
  border: none;
  background: transparent;
  color: var(--whatsapp-text);
  border-radius: 8px;
  text-align: left;
  padding: 9px 10px;
  font-size: 0.86rem;
  cursor: pointer;
}

.sidebar-shell .chat-list-menu-item:hover:not(:disabled) {
  background: var(--whatsapp-hover);
}

.sidebar-shell .chat-list-menu-item:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.chat-lock-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 0.88rem;
  opacity: 0.88;
}

.chat-lock-modal {
  max-width: 430px;
}

.chat-lock-modal .muted-text {
  margin-bottom: 12px;
}

.chat-lock-error {
  margin-bottom: 0;
}

.sidebar-shell .chat-search.modern {
  position: relative;
  padding: 0 0 10px 0;
}

.sidebar-shell .search-input.modern,
.sidebar-shell .users-search .search-input {
  min-height: 44px;
  padding: 10px 16px 10px 44px;
  line-height: 1.25;
  box-sizing: border-box;
  border-radius: 24px;
  border-color: #2f3b47;
  background: #262f38;
  color: #f0f6ff;
}

.sidebar-shell .users-search {
  position: relative;
}

.sidebar-shell .users-search::before {
  content: "?";
  position: absolute;
  left: 22px;
  top: 50%;
  transform: translateY(-54%);
  color: #a9b5c2;
  font-size: 1rem;
  pointer-events: none;
  z-index: 2;
}

.sidebar-shell .search-input.modern::placeholder,
.sidebar-shell .users-search .search-input::placeholder {
  color: #a9b5c2;
}

.sidebar-shell .search-input.modern:focus,
.sidebar-shell .users-search .search-input:focus {
  border-color: #25d366;
  background: #2b3641;
}

.sidebar-shell .search-prefix {
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
  color: #a9b5c2;
  font-size: 1rem;
  pointer-events: none;
}

.sidebar-shell .chat-filter-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 0 0 12px 0;
}

.sidebar-shell .chat-filter-chip {
  border: 1px solid #2f3c49;
  background: transparent;
  color: #b2bdc9;
  border-radius: 999px;
  padding: 8px 14px;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
}

.sidebar-shell .chat-filter-chip:hover {
  border-color: #25d366;
  color: #e5fff0;
}

.sidebar-shell .chat-filter-chip.active {
  background: #1f4a35;
  border-color: #2ad978;
  color: #edfff5;
}

.sidebar-shell .chat-list.modern {
  padding-right: 2px;
}

.sidebar-shell .chat-item {
  border-bottom: none;
  border-radius: 16px;
  margin-bottom: 4px;
  padding: 12px;
}

.sidebar-shell .chat-item:hover {
  background: #1b242d;
}

.sidebar-shell .chat-item.active {
  background: #212d38;
}

.sidebar-shell .chat-item.has-unread {
  background: linear-gradient(90deg, rgba(42, 217, 120, 0.08), rgba(42, 217, 120, 0));
}

.sidebar-shell .chat-item.has-unread:hover {
  background: linear-gradient(90deg, rgba(42, 217, 120, 0.14), rgba(42, 217, 120, 0.02));
}

.sidebar-shell .chat-avatar {
  min-width: 50px;
  width: 50px;
  height: 50px;
  background: #2b3642;
}

.sidebar-shell .chat-name {
  color: #f4f8ff;
  font-weight: 600;
}

.sidebar-shell .chat-name-unread {
  color: #2ad978;
  text-shadow: 0 0 12px rgba(42, 217, 120, 0.55);
}

.sidebar-shell .chat-time {
  color: #98a6b4;
}

.sidebar-shell .chat-time-unread {
  color: #2ad978;
}

.sidebar-shell .chat-preview {
  color: #a4b0bd;
}

.sidebar-shell .chat-right-meta {
  margin-left: auto;
  display: inline-flex;
  flex-direction: column;
  align-items: flex-end;
  justify-content: center;
  gap: 4px;
  min-width: 18px;
}

.sidebar-shell .chat-pin {
  color: #c3cdd8;
  font-size: 0.9rem;
  line-height: 1;
}

.sidebar-shell .chat-unread-pill {
  min-width: 20px;
  padding: 2px 6px;
  border-radius: 999px;
  background: #29d46b;
  color: #072412;
  font-size: 0.72rem;
  font-weight: 700;
  text-align: center;
  line-height: 1.2;
  box-shadow: 0 0 0 2px rgba(17, 20, 23, 0.7), 0 0 10px rgba(41, 212, 107, 0.55);
}

.sidebar-shell .online-indicator {
  width: 8px;
  height: 8px;
  background: #29d46b;
}

.sidebar-shell .users-list-header h3,
.sidebar-shell .requests-header h3 {
  color: #f2f7ff;
}

.sidebar-shell .users-list-header {
  padding-top: 14px;
}

.sidebar-shell .user-item,
.sidebar-shell .request-item {
  background: transparent;
  border-bottom: 1px solid #25313d;
}

.sidebar-shell .user-name,
.sidebar-shell .request-name {
  color: #f2f7ff;
}

.sidebar-shell .user-username,
.sidebar-shell .request-username,
.sidebar-shell .user-status,
.sidebar-shell .request-status,
.sidebar-shell .muted-text,
.sidebar-shell .empty-state {
  color: #9dacba;
}

.sidebar-shell .requests-container {
  border-bottom: none;
  margin-bottom: 0;
}

.sidebar-shell .request-accept:hover {
  background: #173a2b;
}

.sidebar-shell .request-reject:hover {
  background: #4a232b;
}

@media (max-width: 960px) {
  .sidebar.sidebar-shell {
    width: min(100vw, 430px);
  }
}

@media (max-width: 700px) {
  .sidebar.sidebar-shell {
    width: 100%;
  }

  .sidebar-shell .sidebar-rail {
    width: 64px;
    padding-left: 6px;
    padding-right: 6px;
  }

  .sidebar-shell .rail-btn,
  .sidebar-shell .rail-profile-btn {
    width: 40px;
    height: 40px;
    border-radius: 12px;
  }

  .sidebar-shell .rail-profile-avatar {
    width: 33px;
    height: 33px;
  }

  .sidebar-shell .chat-list-container.modern .chat-list-header h2 {
    font-size: 1.7rem;
  }
}

/* --- Shell Mode Chat Pane Fix --- */
.chat-app.shell-mode .main-content {
  background: #121820;
}

.chat-app.shell-mode .chat-container {
  background: #141b23;
  border-left: 1px solid #25313f;
}

.chat-app.shell-mode .chat-header {
  background: #1a222c;
  border-bottom-color: #2f3b47;
  color: #f1f6ff;
}

.chat-app.shell-mode .chat-header-title {
  color: #f1f6ff;
}

.chat-app.shell-mode .chat-header-subtitle {
  color: #9aabb9;
}

.chat-app.shell-mode .chat-header-subtitle.online {
  color: #2bdc7a;
}

.chat-app.shell-mode .header-action-btn {
  color: #c2cfdd;
}

.chat-app.shell-mode .header-action-btn:hover {
  background: #253240;
}

.chat-app.shell-mode .profile-hover-card {
  background: #1a222c;
  border-color: #2f3c49;
}

.chat-app.shell-mode .profile-hover-name {
  color: #eef5ff;
}

.chat-app.shell-mode .profile-hover-username,
.chat-app.shell-mode .profile-hover-presence,
.chat-app.shell-mode .profile-hover-status {
  color: #9caebb;
}

.chat-app.shell-mode .message-list {
  background: #141b23;
}

.chat-app.shell-mode .date-separator::before,
.chat-app.shell-mode .date-separator::after {
  background: #2f3c49;
}

.chat-app.shell-mode .date-separator span {
  background: #1a222c;
  border-color: #2f3c49;
  color: #b7c4d1;
}

.chat-app.shell-mode .new-messages-divider::before {
  border-top-color: #2f3c49;
}

.chat-app.shell-mode .new-messages-divider span {
  background: rgba(41, 212, 107, 0.12);
  border-color: rgba(41, 212, 107, 0.45);
  color: #75f2a2;
}

.chat-app.shell-mode .message-row.other .message-bubble {
  background: #232d38;
  color: #e9f0f8;
}

.chat-app.shell-mode .message-row.other .message-bubble.with-tail::after {
  background: #232d38;
}

.chat-app.shell-mode .message-row.own .message-bubble {
  background: #5465ff;
  color: #fff;
}

.chat-app.shell-mode .message-row.own .message-bubble.with-tail::after {
  background: #5465ff;
}

.chat-app.shell-mode .message-time {
  color: #9aabb9;
}

.chat-app.shell-mode .message-row.own .message-time {
  color: #d9e3ff;
}

.chat-app.shell-mode .pinned-banner,
.chat-app.shell-mode .selection-toolbar {
  background: #1a222c;
  border-bottom-color: #2f3b47;
}

.chat-app.shell-mode .pinned-text,
.chat-app.shell-mode .selection-text {
  color: #a7b6c4;
}

.chat-app.shell-mode .message-composer {
  background: #1a222c;
  border-top-color: #2f3b47;
}

.chat-app.shell-mode .message-composer.drag-active {
  border-color: #2ad978;
  background: #24303c;
}

.chat-app.shell-mode .action-button {
  background: #202a35;
  border-color: #2f3b47;
  color: #c8d4e0;
}

.chat-app.shell-mode .action-button:hover {
  background: #2a3642;
}

.chat-app.shell-mode .message-input {
  background: #202a35;
  border-color: #2f3b47;
  color: #eef5ff;
}

.chat-app.shell-mode .message-input::placeholder {
  color: #98a8b6;
}

.chat-app.shell-mode .message-input:focus {
  border-color: #2ad978;
}

.chat-app.shell-mode .send-button {
  background: #5465ff;
}

.chat-app.shell-mode .send-button:hover {
  background: #4557e8;
}

.chat-app.shell-mode .empty-state {
  background: #141b23;
  color: #a5b4c2;
}

.chat-app.shell-mode .empty-content h1 {
  color: #eef5ff;
}

.chat-app.shell-mode .empty-content p {
  color: #a5b4c2;
}

/* --- Shell Mode Light Theme Overrides --- */
:root:not(.theme-dark) .sidebar.sidebar-shell {
  background: #eef3ff;
  border-right-color: #c0ccf9;
}

:root:not(.theme-dark) .sidebar-shell .sidebar-rail {
  background: #e4ecff;
  border-right-color: #c0ccf9;
}

:root:not(.theme-dark) .sidebar-shell .rail-btn,
:root:not(.theme-dark) .sidebar-shell .rail-profile-btn {
  border-color: #b9c8f6;
  background: #eef3ff;
  color: #445186;
}

:root:not(.theme-dark) .sidebar-shell .rail-btn:hover,
:root:not(.theme-dark) .sidebar-shell .rail-profile-btn:hover {
  border-color: #5465ff;
  color: #1a255e;
}

:root:not(.theme-dark) .sidebar-shell .rail-btn.active {
  border-color: #5465ff;
  background: #dce6ff;
  color: #1d2f89;
}

:root:not(.theme-dark) .sidebar-shell .rail-badge {
  border-color: #e4ecff;
}

:root:not(.theme-dark) .sidebar-shell .rail-divider {
  background: #b7c5f5;
}

:root:not(.theme-dark) .sidebar-shell .sidebar-panel,
:root:not(.theme-dark) .sidebar-shell .chat-list-container.modern,
:root:not(.theme-dark) .sidebar-shell .sidebar-panel-scroll {
  background: #f7f9ff;
}

:root:not(.theme-dark) .sidebar-shell .chat-list-container.modern .chat-list-header h2,
:root:not(.theme-dark) .sidebar-shell .users-list-header h3,
:root:not(.theme-dark) .sidebar-shell .requests-header h3,
:root:not(.theme-dark) .sidebar-shell .user-name,
:root:not(.theme-dark) .sidebar-shell .request-name,
:root:not(.theme-dark) .sidebar-shell .chat-name {
  color: #050208;
}

:root:not(.theme-dark) .sidebar-shell .chat-header-icon-btn {
  border-color: #b9c8f6;
  background: #eef3ff;
  color: #445186;
}

:root:not(.theme-dark) .sidebar-shell .chat-header-icon-btn:hover {
  border-color: #5465ff;
  color: #1a255e;
}

:root:not(.theme-dark) .sidebar-shell .search-input.modern,
:root:not(.theme-dark) .sidebar-shell .users-search .search-input {
  border-color: #b9c8f6;
  background: #eef3ff;
  color: #050208;
}

:root:not(.theme-dark) .sidebar-shell .search-input.modern::placeholder,
:root:not(.theme-dark) .sidebar-shell .users-search .search-input::placeholder,
:root:not(.theme-dark) .sidebar-shell .search-prefix,
:root:not(.theme-dark) .sidebar-shell .users-search::before,
:root:not(.theme-dark) .sidebar-shell .chat-time,
:root:not(.theme-dark) .sidebar-shell .chat-preview,
:root:not(.theme-dark) .sidebar-shell .user-username,
:root:not(.theme-dark) .sidebar-shell .request-username,
:root:not(.theme-dark) .sidebar-shell .user-status,
:root:not(.theme-dark) .sidebar-shell .request-status {
  color: #5b6a99;
}

:root:not(.theme-dark) .sidebar-shell .chat-item:hover,
:root:not(.theme-dark) .sidebar-shell .chat-item.active {
  background: #dde6ff;
}

:root:not(.theme-dark) .sidebar-shell .chat-item.has-unread {
  background: linear-gradient(90deg, rgba(10, 164, 101, 0.14), rgba(10, 164, 101, 0.04));
}

:root:not(.theme-dark) .sidebar-shell .chat-item.has-unread:hover {
  background: linear-gradient(90deg, rgba(10, 164, 101, 0.2), rgba(10, 164, 101, 0.07));
}

:root:not(.theme-dark) .sidebar-shell .chat-name-unread {
  color: #0aa465;
  text-shadow: 0 0 10px rgba(10, 164, 101, 0.36);
}

:root:not(.theme-dark) .sidebar-shell .chat-time-unread {
  color: #0aa465;
}

:root:not(.theme-dark) .sidebar-shell .chat-preview-unread {
  color: #1b2860;
}

:root:not(.theme-dark) .sidebar-shell .chat-avatar {
  background: #cfdcff;
}

:root:not(.theme-dark) .sidebar-shell .user-item,
:root:not(.theme-dark) .sidebar-shell .request-item {
  border-bottom-color: #d5defb;
}

:root:not(.theme-dark) .chat-app.shell-mode .main-content {
  background: var(--whatsapp-bg);
}

:root:not(.theme-dark) .chat-app.shell-mode .chat-container {
  background: var(--whatsapp-panel);
  border-left-color: var(--whatsapp-border);
}

:root:not(.theme-dark) .chat-app.shell-mode .chat-header {
  background: var(--whatsapp-bg);
  border-bottom-color: var(--whatsapp-border);
  color: var(--whatsapp-text);
}

:root:not(.theme-dark) .chat-app.shell-mode .chat-header-title {
  color: var(--whatsapp-text);
}

:root:not(.theme-dark) .chat-app.shell-mode .chat-header-subtitle {
  color: var(--whatsapp-text-secondary);
}

:root:not(.theme-dark) .chat-app.shell-mode .chat-header-subtitle.online {
  color: var(--whatsapp-green);
}

:root:not(.theme-dark) .chat-app.shell-mode .header-action-btn {
  color: var(--whatsapp-text-secondary);
}

:root:not(.theme-dark) .chat-app.shell-mode .header-action-btn:hover {
  background: var(--whatsapp-hover);
}

:root:not(.theme-dark) .chat-app.shell-mode .profile-hover-card {
  background: var(--whatsapp-bg);
  border-color: var(--whatsapp-border);
}

:root:not(.theme-dark) .chat-app.shell-mode .profile-hover-name {
  color: var(--whatsapp-text);
}

:root:not(.theme-dark) .chat-app.shell-mode .profile-hover-username,
:root:not(.theme-dark) .chat-app.shell-mode .profile-hover-presence,
:root:not(.theme-dark) .chat-app.shell-mode .profile-hover-status {
  color: var(--whatsapp-text-secondary);
}

:root:not(.theme-dark) .chat-app.shell-mode .message-list,
:root:not(.theme-dark) .chat-app.shell-mode .empty-state {
  background: var(--whatsapp-panel);
}

:root:not(.theme-dark) .chat-app.shell-mode .date-separator::before,
:root:not(.theme-dark) .chat-app.shell-mode .date-separator::after {
  background: var(--whatsapp-border);
}

:root:not(.theme-dark) .chat-app.shell-mode .date-separator span {
  background: var(--whatsapp-bg);
  border-color: var(--whatsapp-border);
  color: var(--whatsapp-text-secondary);
}

:root:not(.theme-dark) .chat-app.shell-mode .new-messages-divider::before {
  border-top-color: var(--whatsapp-border);
}

:root:not(.theme-dark) .chat-app.shell-mode .message-row.other .message-bubble {
  background: var(--whatsapp-message-other);
  color: var(--whatsapp-text);
}

:root:not(.theme-dark) .chat-app.shell-mode .message-row.other .message-bubble.with-tail::after {
  background: var(--whatsapp-message-other);
}

:root:not(.theme-dark) .chat-app.shell-mode .message-row.own .message-bubble {
  background: var(--whatsapp-message-own);
  color: var(--whatsapp-message-own-text);
}

:root:not(.theme-dark) .chat-app.shell-mode .message-row.own .message-bubble.with-tail::after {
  background: var(--whatsapp-message-own);
}

:root:not(.theme-dark) .chat-app.shell-mode .message-time {
  color: rgba(0, 0, 0, 0.45);
}

:root:not(.theme-dark) .chat-app.shell-mode .message-row.own .message-time {
  color: rgba(255, 255, 255, 0.9);
}

:root:not(.theme-dark) .chat-app.shell-mode .pinned-banner,
:root:not(.theme-dark) .chat-app.shell-mode .selection-toolbar {
  background: var(--whatsapp-bg);
  border-bottom-color: var(--whatsapp-border);
}

:root:not(.theme-dark) .chat-app.shell-mode .pinned-text,
:root:not(.theme-dark) .chat-app.shell-mode .selection-text,
:root:not(.theme-dark) .chat-app.shell-mode .empty-content p {
  color: var(--whatsapp-text-secondary);
}

:root:not(.theme-dark) .chat-app.shell-mode .empty-content h1 {
  color: var(--whatsapp-text);
}

:root:not(.theme-dark) .chat-app.shell-mode .message-composer {
  background: var(--whatsapp-bg);
  border-top-color: var(--whatsapp-border);
}

:root:not(.theme-dark) .chat-app.shell-mode .message-composer.drag-active {
  border-color: var(--whatsapp-green);
  background: var(--whatsapp-hover);
}

:root:not(.theme-dark) .chat-app.shell-mode .action-button {
  background: var(--whatsapp-panel);
  border-color: var(--whatsapp-border);
  color: var(--whatsapp-text-secondary);
}

:root:not(.theme-dark) .chat-app.shell-mode .action-button:hover {
  background: var(--whatsapp-hover);
}

:root:not(.theme-dark) .chat-app.shell-mode .message-input {
  background: var(--whatsapp-bg);
  border-color: var(--whatsapp-border);
  color: var(--whatsapp-text);
}

:root:not(.theme-dark) .chat-app.shell-mode .message-input::placeholder {
  color: var(--whatsapp-text-secondary);
}

:root:not(.theme-dark) .chat-app.shell-mode .message-input:focus {
  border-color: var(--whatsapp-green);
}

:root:not(.theme-dark) .chat-app.shell-mode .send-button {
  background: var(--whatsapp-green);
}

:root:not(.theme-dark) .chat-app.shell-mode .send-button:hover {
  background: var(--whatsapp-green-dark);
}

/* --- Responsive One-Pane Chat --- */
.chat-back-btn {
  display: none;
  width: 34px;
  height: 34px;
  border-radius: 10px;
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-panel);
  color: var(--whatsapp-text-secondary);
  font-size: 1.05rem;
  line-height: 1;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  margin-right: 2px;
}

.chat-back-btn:hover {
  border-color: var(--whatsapp-green);
  background: var(--whatsapp-hover);
  color: var(--whatsapp-text);
}

.chat-app.shell-mode .chat-back-btn {
  background: #202a35;
  border-color: #2f3b47;
  color: #d5e0eb;
}

.chat-app.shell-mode .chat-back-btn:hover {
  background: #2a3642;
}

:root:not(.theme-dark) .chat-app.shell-mode .chat-back-btn {
  background: var(--whatsapp-panel);
  border-color: var(--whatsapp-border);
  color: var(--whatsapp-text-secondary);
}

@media (max-width: 960px) {
  .chat-app.mobile {
    position: relative;
    overflow: hidden;
  }

  .chat-app.mobile .sidebar.sidebar-shell {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 100%;
    z-index: 40;
    transform: translateX(-100%);
    transition: transform 0.24s ease;
  }

  .chat-app.mobile.sidebar-open .sidebar.sidebar-shell {
    transform: translateX(0);
  }

  .chat-app.mobile .main-content {
    width: 100%;
    min-width: 0;
  }

  .chat-app.mobile.sidebar-open .main-content {
    display: none;
  }

  .chat-app.mobile.no-selected-chat .main-content {
    display: none;
  }

  .chat-app.mobile .chat-header {
    padding: 10px 12px;
  }

  .chat-app.mobile .chat-back-btn {
    display: inline-flex;
  }

  .chat-app.mobile .chat-header-actions {
    gap: 8px;
  }

  .chat-app.mobile .header-action-btn {
    width: 34px;
    height: 34px;
    font-size: 1rem;
    padding: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 10px;
  }

  .chat-app.mobile .message-list {
    padding: 12px;
  }

  .chat-app.mobile .message-bubble {
    max-width: 82%;
  }

  .chat-app.mobile .message-composer {
    padding: 10px;
    gap: 8px;
  }

  .chat-app.mobile .action-button,
  .chat-app.mobile .send-button {
    width: 36px;
    height: 36px;
    font-size: 1rem;
  }

  .chat-app.mobile .message-input {
    padding: 10px 12px;
    font-size: 0.9rem;
  }

  .chat-app.mobile .profile-hover-card {
    display: none;
  }
}

@media (max-width: 560px) {
  .chat-app.mobile .message-bubble {
    max-width: 88%;
  }

  .chat-app.mobile .chat-header-title {
    font-size: 0.95rem;
  }

  .chat-app.mobile .chat-header-subtitle {
    font-size: 0.78rem;
  }
}

/* --- Sidebar Drag Resizer --- */
.sidebar-resizer {
  width: 10px;
  flex: 0 0 10px;
  border: none;
  background: transparent;
  padding: 0;
  cursor: col-resize;
  position: relative;
  z-index: 45;
}

.sidebar-resizer::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: 4px;
  width: 2px;
  border-radius: 2px;
  background: #2f3c49;
  opacity: 0.42;
  transition: opacity 0.16s ease, background 0.16s ease;
}

.sidebar-resizer:hover::before,
.chat-app.sidebar-resizing .sidebar-resizer::before {
  opacity: 1;
  background: #2ad978;
}

.chat-app.sidebar-resizing,
.chat-app.sidebar-resizing * {
  cursor: col-resize !important;
  user-select: none;
}

:root:not(.theme-dark) .sidebar-resizer::before {
  background: #b7c4f4;
  opacity: 0.68;
}

:root:not(.theme-dark) .sidebar-resizer:hover::before,
:root:not(.theme-dark) .chat-app.sidebar-resizing .sidebar-resizer::before {
  background: #5465ff;
}

@media (max-width: 960px) {
  .sidebar-resizer {
    display: none;
  }
}

/* --- Motion, Glass, and PWA Visual Enhancements --- */
:root {
  --fx-btn-gradient-start: #5465ff;
  --fx-btn-gradient-middle: #3c90ff;
  --fx-btn-gradient-end: #00ffd4;
}

.route-transition-root,
.route-transition-view {
  width: 100%;
  height: 100%;
  min-height: 100%;
}

.route-transition-root.route-enter .route-transition-view {
  animation: route-fade-in 0.34s cubic-bezier(0.2, 0.68, 0.15, 1) both;
}

.route-transition-root.route-exit .route-transition-view {
  animation: route-fade-out 0.17s ease both;
}

@keyframes route-fade-in {
  from {
    opacity: 0;
    transform: translateY(8px) scale(0.994);
    filter: blur(1.8px);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}

@keyframes route-fade-out {
  from {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateY(-4px) scale(0.996);
  }
}

@keyframes button-gradient-flow {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.btn-primary:not(.confirm-danger),
.auth-button,
.send-button,
.user-action-btn,
.action-btn,
.sidebar-shell .chat-header-create-btn {
  position: relative;
  isolation: isolate;
  overflow: hidden;
  background: transparent !important;
  border: none;
  color: #f6fbff;
  box-shadow: 0 10px 24px rgba(84, 101, 255, 0.28), inset 0 1px 0 rgba(255, 255, 255, 0.24);
  transition: transform 0.22s ease, box-shadow 0.22s ease, filter 0.22s ease;
}

.btn-primary:not(.confirm-danger)::before,
.auth-button::before,
.send-button::before,
.user-action-btn::before,
.action-btn::before,
.sidebar-shell .chat-header-create-btn::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: -1;
  border-radius: inherit;
  background: linear-gradient(
    120deg,
    var(--fx-btn-gradient-start) 0%,
    var(--fx-btn-gradient-middle) 52%,
    var(--fx-btn-gradient-end) 100%
  );
  background-size: 230% 230%;
  animation: button-gradient-flow 7.5s ease-in-out infinite;
}

.btn-primary:not(.confirm-danger):hover,
.auth-button:hover:not(:disabled),
.send-button:hover,
.user-action-btn:hover,
.action-btn:hover,
.sidebar-shell .chat-header-create-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 28px rgba(84, 101, 255, 0.34), inset 0 1px 0 rgba(255, 255, 255, 0.28);
}

.btn-primary:not(.confirm-danger):active,
.auth-button:active,
.send-button:active,
.user-action-btn:active,
.action-btn:active,
.sidebar-shell .chat-header-create-btn:active {
  transform: translateY(0);
}

.btn-primary.confirm-danger {
  box-shadow: 0 8px 20px rgba(192, 57, 43, 0.35);
}

.auth-button:disabled::before,
.btn-primary:disabled::before {
  animation-play-state: paused;
  filter: saturate(0.65) brightness(0.85);
}

.sidebar.sidebar-shell {
  position: relative;
  background: linear-gradient(150deg, rgba(15, 21, 36, 0.78), rgba(9, 13, 24, 0.63));
  border-right: 1px solid rgba(169, 181, 221, 0.25);
  box-shadow: 0 26px 48px rgba(5, 8, 18, 0.42);
  backdrop-filter: blur(16px) saturate(128%);
  -webkit-backdrop-filter: blur(16px) saturate(128%);
}

.sidebar.sidebar-shell::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 16% 12%, rgba(84, 101, 255, 0.22), transparent 42%),
    radial-gradient(circle at 84% 84%, rgba(0, 255, 212, 0.14), transparent 38%);
}

.sidebar-shell .sidebar-rail,
.sidebar-shell .sidebar-panel {
  position: relative;
  z-index: 1;
  background: rgba(12, 17, 30, 0.48);
  backdrop-filter: blur(14px) saturate(120%);
  -webkit-backdrop-filter: blur(14px) saturate(120%);
}

:root:not(.theme-dark) .sidebar.sidebar-shell {
  background: linear-gradient(150deg, rgba(246, 249, 255, 0.82), rgba(230, 238, 255, 0.67));
  border-right-color: rgba(84, 101, 255, 0.26);
  box-shadow: 0 22px 44px rgba(84, 101, 255, 0.18);
}

:root:not(.theme-dark) .sidebar-shell .sidebar-rail,
:root:not(.theme-dark) .sidebar-shell .sidebar-panel {
  background: rgba(247, 250, 255, 0.62);
}

.auth-theme-toggle,
.header-action-btn.vanish-toggle,
.sidebar-shell .rail-btn,
.sidebar-shell .rail-profile-btn {
  border: 1px solid rgba(173, 186, 230, 0.24);
  box-shadow:
    7px 7px 14px rgba(4, 7, 16, 0.34),
    -6px -6px 12px rgba(255, 255, 255, 0.05),
    inset 1px 1px 0 rgba(255, 255, 255, 0.18);
}

.auth-theme-toggle,
.header-action-btn.vanish-toggle {
  background: linear-gradient(145deg, rgba(36, 45, 70, 0.68), rgba(18, 24, 41, 0.72));
}

.header-action-btn.vanish-toggle.active {
  color: #f6fbff;
  box-shadow:
    inset 6px 6px 12px rgba(13, 18, 34, 0.5),
    inset -5px -5px 11px rgba(126, 145, 255, 0.22),
    0 6px 16px rgba(84, 101, 255, 0.36);
}

.setting-row input[type="checkbox"] {
  -webkit-appearance: none;
  appearance: none;
  width: 46px;
  height: 26px;
  border-radius: 999px;
  border: 1px solid rgba(169, 181, 221, 0.24);
  background: linear-gradient(145deg, rgba(33, 40, 56, 0.92), rgba(15, 21, 33, 0.94));
  box-shadow:
    inset 5px 5px 10px rgba(4, 8, 16, 0.58),
    inset -4px -4px 8px rgba(255, 255, 255, 0.05);
  cursor: pointer;
  position: relative;
  transition: background 0.24s ease, box-shadow 0.24s ease, border-color 0.24s ease;
}

.setting-row input[type="checkbox"]::after {
  content: "";
  position: absolute;
  top: 3px;
  left: 3px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: linear-gradient(145deg, #f4f8ff, #d7e2ff);
  box-shadow: 2px 2px 4px rgba(3, 5, 11, 0.36);
  transition: transform 0.24s ease, background 0.24s ease;
}

.setting-row input[type="checkbox"]:checked {
  border-color: rgba(70, 229, 179, 0.38);
  background: linear-gradient(145deg, rgba(84, 101, 255, 0.96), rgba(0, 221, 183, 0.88));
  box-shadow:
    inset 4px 4px 8px rgba(8, 14, 30, 0.35),
    inset -3px -3px 7px rgba(170, 255, 237, 0.18),
    0 0 0 2px rgba(84, 101, 255, 0.14);
}

.setting-row input[type="checkbox"]:checked::after {
  transform: translateX(20px);
  background: linear-gradient(145deg, #ffffff, #e9fff7);
}

.modal-overlay {
  background: rgba(4, 7, 16, 0.44);
  backdrop-filter: blur(8px) saturate(116%);
  -webkit-backdrop-filter: blur(8px) saturate(116%);
}

.modal-content,
.profile-hover-card,
.push-toast,
.upload-preview,
.chat-header {
  backdrop-filter: blur(12px) saturate(122%);
  -webkit-backdrop-filter: blur(12px) saturate(122%);
}

.chat-header {
  background: rgba(13, 19, 48, 0.72);
  border-bottom: 1px solid rgba(169, 181, 221, 0.22);
}

.modal-content {
  background: rgba(11, 17, 38, 0.76);
  border: 1px solid rgba(169, 181, 221, 0.24);
}

.push-toast {
  background: rgba(17, 24, 46, 0.78);
  border: 1px solid rgba(98, 120, 255, 0.28);
}

.upload-preview {
  background: rgba(15, 20, 40, 0.8);
  border-color: rgba(169, 181, 221, 0.24);
}

:root:not(.theme-dark) .auth-theme-toggle,
:root:not(.theme-dark) .header-action-btn.vanish-toggle,
:root:not(.theme-dark) .sidebar-shell .rail-btn,
:root:not(.theme-dark) .sidebar-shell .rail-profile-btn {
  border-color: rgba(141, 160, 230, 0.36);
  box-shadow:
    7px 7px 14px rgba(174, 188, 234, 0.55),
    -7px -7px 14px rgba(255, 255, 255, 0.96),
    inset 1px 1px 0 rgba(255, 255, 255, 0.95);
}

:root:not(.theme-dark) .auth-theme-toggle,
:root:not(.theme-dark) .header-action-btn.vanish-toggle {
  background: linear-gradient(145deg, rgba(239, 244, 255, 0.95), rgba(221, 231, 255, 0.88));
}

:root:not(.theme-dark) .setting-row input[type="checkbox"] {
  border-color: rgba(153, 170, 233, 0.48);
  background: linear-gradient(145deg, #edf2ff, #dfe8ff);
  box-shadow:
    inset 4px 4px 8px rgba(193, 206, 245, 0.9),
    inset -4px -4px 8px rgba(255, 255, 255, 0.95);
}

:root:not(.theme-dark) .setting-row input[type="checkbox"]::after {
  background: linear-gradient(145deg, #ffffff, #f0f5ff);
  box-shadow: 2px 2px 5px rgba(115, 130, 185, 0.35);
}

:root:not(.theme-dark) .setting-row input[type="checkbox"]:checked {
  background: linear-gradient(145deg, #5465ff, #00dcc2);
  box-shadow:
    inset 4px 4px 8px rgba(82, 98, 220, 0.28),
    inset -3px -3px 7px rgba(214, 255, 247, 0.45);
}

:root:not(.theme-dark) .modal-content {
  background: rgba(247, 250, 255, 0.86);
  border-color: rgba(84, 101, 255, 0.26);
}

:root:not(.theme-dark) .push-toast {
  background: rgba(247, 250, 255, 0.88);
  border-color: rgba(84, 101, 255, 0.22);
}

:root:not(.theme-dark) .upload-preview,
:root:not(.theme-dark) .chat-header {
  background: rgba(246, 249, 255, 0.78);
  border-color: rgba(84, 101, 255, 0.24);
}

@media (prefers-reduced-motion: reduce) {
  .route-transition-root.route-enter .route-transition-view,
  .route-transition-root.route-exit .route-transition-view {
    animation: none;
  }

  .btn-primary:not(.confirm-danger)::before,
  .auth-button::before,
  .send-button::before,
  .user-action-btn::before,
  .action-btn::before,
  .sidebar-shell .chat-header-create-btn::before {
    animation: none;
  }
}

/* --- Global Claymorphism Skin --- */
:root {
  --clay-bg: #e9eeff;
  --clay-bg-accent-1: #f8faff;
  --clay-bg-accent-2: #d5deff;
  --clay-surface: #e7edff;
  --clay-surface-alt: #dfe7ff;
  --clay-inset: #edf2ff;
  --clay-border: rgba(117, 137, 210, 0.28);
  --clay-highlight: rgba(255, 255, 255, 0.92);
  --clay-shadow: rgba(130, 148, 214, 0.48);
  --clay-shadow-deep: rgba(98, 114, 180, 0.4);
  --clay-accent: #6078ff;
  --clay-accent-dark: #4c64ea;
  --clay-accent-border: rgba(49, 70, 184, 0.5);
  --clay-shadow-raised: 11px 11px 24px var(--clay-shadow), -11px -11px 24px var(--clay-highlight);
  --clay-shadow-soft: 7px 7px 16px rgba(130, 148, 214, 0.32), -7px -7px 16px rgba(255, 255, 255, 0.85);
  --clay-shadow-pressed: inset 6px 6px 14px var(--clay-shadow-deep), inset -6px -6px 14px var(--clay-highlight);
}

:root.theme-dark {
  --clay-bg: #0d1433;
  --clay-bg-accent-1: #1a2454;
  --clay-bg-accent-2: #090f27;
  --clay-surface: #1a2756;
  --clay-surface-alt: #16214a;
  --clay-inset: #101a40;
  --clay-border: rgba(145, 167, 255, 0.24);
  --clay-highlight: rgba(255, 255, 255, 0.07);
  --clay-shadow: rgba(6, 10, 24, 0.7);
  --clay-shadow-deep: rgba(2, 5, 14, 0.88);
  --clay-accent: #7087ff;
  --clay-accent-dark: #5e74f4;
  --clay-accent-border: rgba(137, 157, 255, 0.45);
  --clay-shadow-raised: 11px 11px 24px var(--clay-shadow), -11px -11px 24px var(--clay-highlight);
  --clay-shadow-soft: 7px 7px 16px rgba(6, 10, 24, 0.66), -7px -7px 16px rgba(255, 255, 255, 0.05);
  --clay-shadow-pressed: inset 6px 6px 14px rgba(1, 3, 10, 0.82), inset -6px -6px 14px rgba(162, 180, 255, 0.08);
}

body,
.chat-app,
.main-content,
.chat-container,
.auth,
.profile-page {
  background:
    radial-gradient(circle at 12% 14%, var(--clay-bg-accent-1) 0%, transparent 44%),
    radial-gradient(circle at 86% 84%, var(--clay-bg-accent-2) 0%, transparent 40%),
    var(--clay-bg) !important;
}

.auth-background,
.profile-page-background {
  background: transparent !important;
}

.chat-container,
.chat-header,
.message-composer,
.sidebar.sidebar-shell,
.sidebar-shell .sidebar-rail,
.sidebar-shell .sidebar-panel,
.auth-card,
.profile-page-card,
.modal-content,
.profile-hover-card,
.push-toast,
.upload-preview,
.empty-content,
.pinned-banner,
.selection-toolbar {
  border: 1px solid var(--clay-border);
  box-shadow: var(--clay-shadow-raised);
  background: var(--clay-surface) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

.sidebar.sidebar-shell::before {
  display: none;
}

.chat-container,
.profile-page-card,
.auth-card,
.modal-content {
  border-radius: 22px;
}

.sidebar.sidebar-shell {
  border-right: none;
}

.sidebar-shell .sidebar-rail,
.sidebar-shell .sidebar-panel {
  border-radius: 20px;
}

.sidebar-shell .sidebar-rail {
  margin: 10px 8px 10px 10px;
}

.sidebar-shell .sidebar-panel {
  margin: 10px 10px 10px 0;
}

.sidebar-shell .chat-item,
.sidebar-shell .user-item,
.sidebar-shell .request-item {
  width: calc(100% - 16px);
  margin: 6px 8px;
  border: 1px solid var(--clay-border);
  border-radius: 18px;
  background: var(--clay-surface-alt);
  box-shadow: var(--clay-shadow-soft);
}

.sidebar-shell .chat-item:hover,
.sidebar-shell .chat-item.active,
.sidebar-shell .user-item:hover,
.sidebar-shell .request-item:hover {
  box-shadow: var(--clay-shadow-raised);
}

.message-list,
.sidebar-shell .chat-list-container.modern,
.sidebar-shell .chat-list-header.modern,
.users-list-container,
.requests-container {
  background: transparent;
}

.message-row.other .message-bubble {
  background: var(--clay-surface-alt);
  border: 1px solid var(--clay-border);
  color: var(--whatsapp-text);
  box-shadow: var(--clay-shadow-soft);
}

.message-row.other .message-bubble.with-tail::after {
  background: var(--clay-surface-alt);
}

.message-row.own .message-bubble {
  background: linear-gradient(155deg, var(--clay-accent), var(--clay-accent-dark));
  border: 1px solid var(--clay-accent-border);
  color: #f8fbff;
  box-shadow: 8px 8px 16px rgba(70, 89, 172, 0.42), -4px -4px 12px rgba(255, 255, 255, 0.14), inset 1px 1px 0 rgba(255, 255, 255, 0.28);
}

.message-row.own .message-bubble.with-tail::after {
  background: var(--clay-accent-dark);
}

.input-wrapper,
.form-input,
.message-input,
.search-input,
.search-input.modern,
.users-search .search-input,
.custom-status-display,
.custom-status-input {
  border: 1px solid var(--clay-border);
  background: var(--clay-inset) !important;
  box-shadow: var(--clay-shadow-pressed);
}

.input-wrapper:focus-within,
.form-input:focus,
.message-input:focus,
.search-input:focus,
.search-input.modern:focus,
.users-search .search-input:focus,
.custom-status-input:focus {
  box-shadow: var(--clay-shadow-pressed), 0 0 0 2px rgba(96, 120, 255, 0.24);
}

.btn-primary:not(.confirm-danger)::before,
.auth-button::before,
.send-button::before,
.user-action-btn::before,
.action-btn::before,
.sidebar-shell .chat-header-create-btn::before {
  content: none !important;
}

.btn-primary:not(.confirm-danger),
.auth-button,
.send-button,
.user-action-btn,
.action-btn,
.sidebar-shell .chat-header-create-btn {
  background: linear-gradient(160deg, var(--clay-accent), var(--clay-accent-dark)) !important;
  border: 1px solid var(--clay-accent-border);
  color: #f8fbff;
  box-shadow: 9px 9px 18px rgba(75, 93, 182, 0.38), -5px -5px 14px rgba(255, 255, 255, 0.18), inset 1px 1px 0 rgba(255, 255, 255, 0.3);
}

.btn-secondary,
.auth-theme-toggle,
.header-action-btn,
.chat-header-icon-btn,
.action-button,
.sidebar-shell .rail-btn,
.sidebar-shell .rail-profile-btn,
.request-accept,
.request-reject,
.modal-close,
.profile-photo-btn,
.member-remove-btn,
.chat-back-btn {
  border: 1px solid var(--clay-border) !important;
  background: var(--clay-surface-alt) !important;
  color: var(--whatsapp-text);
  box-shadow: var(--clay-shadow-soft) !important;
}

.btn-primary:not(.confirm-danger):hover,
.auth-button:hover:not(:disabled),
.send-button:hover,
.user-action-btn:hover,
.action-btn:hover,
.sidebar-shell .chat-header-create-btn:hover,
.btn-secondary:hover,
.auth-theme-toggle:hover,
.header-action-btn:hover,
.chat-header-icon-btn:hover,
.action-button:hover,
.sidebar-shell .rail-btn:hover,
.sidebar-shell .rail-profile-btn:hover,
.request-accept:hover,
.request-reject:hover,
.modal-close:hover,
.profile-photo-btn:hover,
.member-remove-btn:hover,
.chat-back-btn:hover {
  transform: translateY(-1px);
  box-shadow: var(--clay-shadow-raised) !important;
}

.btn-primary:not(.confirm-danger):active,
.auth-button:active,
.send-button:active,
.user-action-btn:active,
.action-btn:active,
.sidebar-shell .chat-header-create-btn:active,
.btn-secondary:active,
.auth-theme-toggle:active,
.header-action-btn:active,
.chat-header-icon-btn:active,
.action-button:active,
.sidebar-shell .rail-btn:active,
.sidebar-shell .rail-profile-btn:active,
.request-accept:active,
.request-reject:active,
.modal-close:active,
.profile-photo-btn:active,
.member-remove-btn:active,
.chat-back-btn:active {
  transform: translateY(0);
  box-shadow: var(--clay-shadow-pressed) !important;
}

.setting-row input[type="checkbox"] {
  border-color: var(--clay-border);
  background: var(--clay-inset);
  box-shadow: var(--clay-shadow-pressed);
}

.setting-row input[type="checkbox"]::after {
  background: linear-gradient(145deg, #ffffff, #dfe7ff);
}

.setting-row input[type="checkbox"]:checked {
  background: linear-gradient(145deg, var(--clay-accent), var(--clay-accent-dark));
  border-color: var(--clay-accent-border);
}

.modal-overlay {
  background: rgba(10, 16, 38, 0.36);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

:root:not(.theme-dark) .chat-app.shell-mode .chat-container,
:root:not(.theme-dark) .chat-app.shell-mode .chat-header,
:root:not(.theme-dark) .chat-app.shell-mode .message-list,
:root:not(.theme-dark) .chat-app.shell-mode .message-composer,
:root:not(.theme-dark) .chat-app.shell-mode .empty-state {
  background: transparent;
}

.empty-state {
  padding: 24px;
}

.empty-content {
  width: min(560px, calc(100% - 24px));
  padding: 24px 28px;
  border-radius: 20px;
  margin: 0 auto;
}

.empty-content h1,
.empty-content p,
.empty-content .hint {
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}

@media (max-width: 640px) {
  .empty-content {
    width: calc(100% - 16px);
    padding: 18px 16px;
  }
}

/* --- Message quick actions UI --- */
.message-radial-overlay {
  position: fixed;
  inset: 0;
  z-index: 140;
  pointer-events: none;
}

.message-radial-menu {
  position: fixed;
  width: 0;
  height: 0;
  transform: translate(-50%, -50%);
  pointer-events: none;
}

.message-radial-menu::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: 60px;
  height: 60px;
  transform: translate(-50%, -50%);
  border-radius: 999px;
  background: rgba(13, 19, 48, 0.9);
  border: 1px solid rgba(169, 181, 221, 0.28);
  box-shadow: 0 10px 24px rgba(6, 10, 24, 0.5);
}

.radial-action {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 38px;
  height: 38px;
  border: 1px solid rgba(169, 181, 221, 0.32);
  border-radius: 999px;
  background: rgba(20, 29, 66, 0.96);
  color: #f4f7ff;
  font-size: 1rem;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.16s ease, background 0.16s ease, border-color 0.16s ease;
  pointer-events: auto;
  transform: translate(-50%, -50%);
}

.radial-action:hover:not(:disabled) {
  background: rgba(84, 101, 255, 0.92);
  border-color: rgba(169, 181, 221, 0.55);
}

.radial-action:disabled {
  opacity: 0.42;
  cursor: not-allowed;
}

.radial-reply {
  transform: translate(-50%, -50%) translateY(-56px);
}

.radial-react {
  transform: translate(-50%, -50%) translateX(56px);
}

.radial-edit {
  transform: translate(-50%, -50%) translateY(56px);
}

.radial-delete {
  transform: translate(-50%, -50%) translateX(-56px);
}

.message-emoji-bar {
  position: fixed;
  z-index: 145;
  transform: translate(-50%, -120%);
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 7px 9px;
  border-radius: 999px;
  border: 1px solid rgba(169, 181, 221, 0.3);
  background: rgba(13, 19, 48, 0.94);
  box-shadow: 0 12px 26px rgba(6, 10, 24, 0.48);
}

.message-emoji-btn {
  width: 34px;
  height: 34px;
  border: none;
  border-radius: 999px;
  background: transparent;
  color: #f5f8ff;
  font-size: 1.05rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.16s ease, background 0.16s ease;
}

.message-emoji-btn:hover {
  background: rgba(84, 101, 255, 0.34);
  transform: translateY(-1px);
}

.message-reactions {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 8px;
}

.message-reaction-chip {
  border: 1px solid rgba(84, 101, 255, 0.26);
  border-radius: 999px;
  padding: 2px 8px;
  font-size: 0.75rem;
  line-height: 1.3;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: rgba(84, 101, 255, 0.12);
  color: var(--whatsapp-text);
  cursor: pointer;
}

.message-reaction-chip.active {
  border-color: rgba(0, 255, 212, 0.42);
  background: rgba(0, 255, 212, 0.18);
}

.message-row.own .message-reaction-chip {
  border-color: rgba(255, 255, 255, 0.28);
  background: rgba(255, 255, 255, 0.18);
  color: #f5f8ff;
}

.message-row.own .message-reaction-chip.active {
  background: rgba(0, 255, 212, 0.3);
  border-color: rgba(0, 255, 212, 0.6);
}

.edited-label {
  margin-right: 6px;
  font-size: 0.68rem;
  font-weight: 600;
  letter-spacing: 0.01em;
  opacity: 0.84;
}

.editing-banner {
  border-left-color: var(--whatsapp-green);
  background: rgba(84, 101, 255, 0.1);
}

.editing-banner .replying-title {
  color: var(--whatsapp-green);
}

:root:not(.theme-dark) .message-radial-menu::before,
:root:not(.theme-dark) .message-emoji-bar {
  background: rgba(246, 249, 255, 0.95);
  border-color: rgba(84, 101, 255, 0.3);
}

:root:not(.theme-dark) .radial-action {
  background: rgba(237, 242, 255, 0.96);
  color: #20306b;
  border-color: rgba(84, 101, 255, 0.32);
}

:root:not(.theme-dark) .radial-action:hover:not(:disabled) {
  background: rgba(84, 101, 255, 0.16);
}

:root:not(.theme-dark) .message-emoji-btn {
  color: #25346f;
}

:root:not(.theme-dark) .message-emoji-btn:hover {
  background: rgba(84, 101, 255, 0.16);
}

@media (max-width: 640px) {
  .radial-action {
    width: 34px;
    height: 34px;
    font-size: 0.9rem;
  }

  .radial-reply {
    transform: translate(-50%, -50%) translateY(-50px);
  }

  .radial-react {
    transform: translate(-50%, -50%) translateX(50px);
  }

  .radial-edit {
    transform: translate(-50%, -50%) translateY(50px);
  }

  .radial-delete {
    transform: translate(-50%, -50%) translateX(-50px);
  }

  .message-emoji-bar {
    gap: 4px;
    padding: 6px 7px;
  }

  .message-emoji-btn {
    width: 30px;
    height: 30px;
    font-size: 0.95rem;
  }
}

/* --- Claymorphism Redesign (2026-02) --- */
:root {
  --clay-lite-bg: #f7f7fb;
  --clay-lite-grad-a: #e6e9ff;
  --clay-lite-grad-b: #f3e7ff;
  --clay-lite-accent: #c5b4ff;
  --clay-lite-accent-2: #a0c4ff;
  --clay-lite-accent-3: #ffcad4;
  --clay-lite-surface: #eef1ff;
  --clay-lite-surface-2: #f5eeff;
  --clay-lite-text: #2f3560;
  --clay-lite-muted: #6f7698;
  --clay-lite-border: rgba(137, 150, 201, 0.28);
  --clay-lite-radius: 26px;
  --clay-lite-radius-pill: 999px;
  --clay-lite-raised: 8px 8px 16px rgba(0, 0, 0, 0.08), -8px -8px 16px rgba(255, 255, 255, 0.6);
  --clay-lite-pressed: inset 6px 6px 12px rgba(173, 182, 224, 0.45), inset -6px -6px 12px rgba(255, 255, 255, 0.92);
  --clay-lite-soft: 4px 4px 12px rgba(145, 160, 220, 0.25), -4px -4px 10px rgba(255, 255, 255, 0.8);
  --clay-lite-transition: 0.3s ease-in-out;
}

:root:not(.theme-dark) body,
:root:not(.theme-dark) .chat-app,
:root:not(.theme-dark) .main-content,
:root:not(.theme-dark) .chat-container {
  color: var(--clay-lite-text);
  background:
    radial-gradient(920px 520px at 4% 8%, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0) 58%),
    radial-gradient(760px 540px at 96% 96%, rgba(255, 218, 231, 0.42), rgba(255, 218, 231, 0) 52%),
    linear-gradient(130deg, var(--clay-lite-grad-a), var(--clay-lite-grad-b));
}

:root:not(.theme-dark) .sidebar.sidebar-shell,
:root:not(.theme-dark) .sidebar-shell .sidebar-rail,
:root:not(.theme-dark) .sidebar-shell .sidebar-panel,
:root:not(.theme-dark) .chat-container,
:root:not(.theme-dark) .chat-header,
:root:not(.theme-dark) .message-composer,
:root:not(.theme-dark) .modal-content,
:root:not(.theme-dark) .empty-content,
:root:not(.theme-dark) .push-toast,
:root:not(.theme-dark) .pinned-banner,
:root:not(.theme-dark) .selection-toolbar {
  border-radius: var(--clay-lite-radius);
  border: 1px solid var(--clay-lite-border);
  background: linear-gradient(140deg, var(--clay-lite-surface), var(--clay-lite-surface-2)) !important;
  box-shadow: var(--clay-lite-raised) !important;
}

:root:not(.theme-dark) .sidebar.sidebar-shell,
:root:not(.theme-dark) .chat-container {
  animation: clayFadeIn 0.34s ease-out;
}

:root:not(.theme-dark) .chat-item,
:root:not(.theme-dark) .user-item,
:root:not(.theme-dark) .request-item,
:root:not(.theme-dark) .message-bubble,
:root:not(.theme-dark) .chat-header-icon-btn,
:root:not(.theme-dark) .chat-header-create-btn,
:root:not(.theme-dark) .btn-primary,
:root:not(.theme-dark) .btn-secondary,
:root:not(.theme-dark) .action-button,
:root:not(.theme-dark) .send-button {
  transition: transform var(--clay-lite-transition), box-shadow var(--clay-lite-transition), background var(--clay-lite-transition), border-color var(--clay-lite-transition);
}

:root:not(.theme-dark) .chat-item,
:root:not(.theme-dark) .user-item,
:root:not(.theme-dark) .request-item {
  border-radius: 24px;
  border: 1px solid var(--clay-lite-border);
  background: linear-gradient(145deg, #f2f4ff, #e9edff);
  box-shadow: var(--clay-lite-soft);
}

:root:not(.theme-dark) .chat-item:hover,
:root:not(.theme-dark) .user-item:hover,
:root:not(.theme-dark) .request-item:hover,
:root:not(.theme-dark) .message-row .message-bubble:hover,
:root:not(.theme-dark) .chat-header-icon-btn:hover,
:root:not(.theme-dark) .chat-header-create-btn:hover,
:root:not(.theme-dark) .btn-primary:hover,
:root:not(.theme-dark) .btn-secondary:hover,
:root:not(.theme-dark) .action-button:hover,
:root:not(.theme-dark) .send-button:hover {
  transform: scale(1.02);
  box-shadow: var(--clay-lite-raised) !important;
}

:root:not(.theme-dark) .chat-item.active,
:root:not(.theme-dark) .chat-item:active,
:root:not(.theme-dark) .btn-primary:active,
:root:not(.theme-dark) .btn-secondary:active,
:root:not(.theme-dark) .action-button:active,
:root:not(.theme-dark) .send-button:active,
:root:not(.theme-dark) .chat-header-icon-btn:active,
:root:not(.theme-dark) .chat-header-create-btn:active {
  box-shadow: var(--clay-lite-pressed) !important;
  transform: translateY(0);
}

:root:not(.theme-dark) .search-input,
:root:not(.theme-dark) .search-input.modern,
:root:not(.theme-dark) .message-input,
:root:not(.theme-dark) .form-input,
:root:not(.theme-dark) .custom-status-input {
  border-radius: var(--clay-lite-radius-pill);
  border: 1px solid rgba(132, 146, 205, 0.32);
  background: #edf1ff !important;
  box-shadow: var(--clay-lite-pressed);
  color: var(--clay-lite-text);
}

:root:not(.theme-dark) .message-composer {
  position: sticky;
  bottom: 8px;
  margin: 0 12px 12px;
  padding: 12px;
}

:root:not(.theme-dark) .message-row .message-bubble {
  border-radius: 22px;
  border: 1px solid var(--clay-lite-border);
}

:root:not(.theme-dark) .message-row.other .message-bubble {
  background: linear-gradient(148deg, #eef3ff, #f3ecff) !important;
  color: #34406f;
  box-shadow: var(--clay-lite-soft);
}

:root:not(.theme-dark) .message-row.own .message-bubble {
  background: linear-gradient(145deg, var(--clay-lite-accent), var(--clay-lite-accent-2)) !important;
  color: #ffffff;
  border-color: rgba(113, 126, 201, 0.45);
  box-shadow: 6px 6px 14px rgba(129, 144, 210, 0.42), -4px -4px 10px rgba(255, 255, 255, 0.28);
}

:root:not(.theme-dark) .message-time,
:root:not(.theme-dark) .chat-time,
:root:not(.theme-dark) .chat-preview,
:root:not(.theme-dark) .muted-text,
:root:not(.theme-dark) .hint {
  color: var(--clay-lite-muted);
}

:root:not(.theme-dark) .chat-lock-modal {
  max-width: 420px;
  border-radius: 28px;
}

:root:not(.theme-dark) .chat-lock-modal .modal-header h2::before {
  content: "\1F512";
  margin-right: 8px;
  filter: drop-shadow(0 1px 0 rgba(255, 255, 255, 0.5));
}

.chat-lock-error {
  animation: clayShake 0.34s ease;
}

/* Voice message UI tokens (for message-audio blocks) */
:root:not(.theme-dark) .voice-message-ui,
:root:not(.theme-dark) .voice-message,
:root:not(.theme-dark) .audio-message {
  border-radius: 22px;
  border: 1px solid var(--clay-lite-border);
  background: linear-gradient(145deg, #edf2ff, #f7eeff);
  box-shadow: var(--clay-lite-soft);
  padding: 10px 12px;
}

:root:not(.theme-dark) .voice-play-btn,
:root:not(.theme-dark) .audio-play-btn,
:root:not(.theme-dark) .mic-button {
  width: 42px;
  height: 42px;
  border: 1px solid var(--clay-lite-border);
  border-radius: 999px;
  background: linear-gradient(145deg, #eff3ff, #dfe8ff);
  box-shadow: var(--clay-lite-soft);
}

:root:not(.theme-dark) .voice-progress,
:root:not(.theme-dark) .audio-progress,
:root:not(.theme-dark) .voice-slider {
  accent-color: #9faeff;
}

:root:not(.theme-dark) .voice-message.is-playing,
:root:not(.theme-dark) .audio-message.is-playing {
  box-shadow: 0 0 0 2px rgba(160, 196, 255, 0.42), var(--clay-lite-soft);
}

.chat-list,
.message-list,
.sidebar-panel-scroll,
.users-list,
.requests-list,
.modal-body {
  scrollbar-width: thin;
  scrollbar-color: rgba(165, 176, 224, 0.7) rgba(255, 255, 255, 0.2);
}

.chat-list::-webkit-scrollbar,
.message-list::-webkit-scrollbar,
.sidebar-panel-scroll::-webkit-scrollbar,
.users-list::-webkit-scrollbar,
.requests-list::-webkit-scrollbar,
.modal-body::-webkit-scrollbar {
  width: 10px;
}

.chat-list::-webkit-scrollbar-track,
.message-list::-webkit-scrollbar-track,
.sidebar-panel-scroll::-webkit-scrollbar-track,
.users-list::-webkit-scrollbar-track,
.requests-list::-webkit-scrollbar-track,
.modal-body::-webkit-scrollbar-track {
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.35);
}

.chat-list::-webkit-scrollbar-thumb,
.message-list::-webkit-scrollbar-thumb,
.sidebar-panel-scroll::-webkit-scrollbar-thumb,
.users-list::-webkit-scrollbar-thumb,
.requests-list::-webkit-scrollbar-thumb,
.modal-body::-webkit-scrollbar-thumb {
  border-radius: 999px;
  border: 2px solid rgba(255, 255, 255, 0.35);
  background: linear-gradient(180deg, #c5b4ff, #a0c4ff);
}

@keyframes clayFadeIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes clayShake {
  0% { transform: translateX(0); }
  20% { transform: translateX(-6px); }
  40% { transform: translateX(6px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
  100% { transform: translateX(0); }
}

@media (max-width: 960px) {
  :root:not(.theme-dark) .sidebar.sidebar-shell,
  :root:not(.theme-dark) .chat-container,
  :root:not(.theme-dark) .chat-header,
  :root:not(.theme-dark) .message-composer {
    border-radius: 20px;
  }

  :root:not(.theme-dark) .chat-search.modern,
  :root:not(.theme-dark) .chat-list.modern {
    padding-left: 8px;
    padding-right: 8px;
  }

  :root:not(.theme-dark) .chat-header-create-btn {
    font-size: 0.92rem;
    padding: 10px 14px;
  }
}

@media (max-width: 640px) {
  :root:not(.theme-dark) .chat-app.mobile .chat-container,
  :root:not(.theme-dark) .chat-app.mobile .message-composer,
  :root:not(.theme-dark) .chat-app.mobile .chat-header {
    border-radius: 18px;
  }

  :root:not(.theme-dark) .chat-item,
  :root:not(.theme-dark) .message-row .message-bubble {
    border-radius: 18px;
  }

  :root:not(.theme-dark) .message-composer {
    margin: 0 8px 10px;
    padding: 10px;
  }
}

/* --- Advanced Emoji Picker --- */
.emoji-picker.advanced {
  width: min(420px, calc(100vw - 24px));
  max-height: min(360px, 52vh);
  padding: 0;
  border-radius: 18px;
  overflow: hidden;
  box-shadow: var(--shadow-md);
}

.emoji-picker-tabs {
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  gap: 2px;
  padding: 8px;
  border-bottom: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-panel);
}

.emoji-tab {
  border: none;
  border-radius: 10px;
  background: transparent;
  color: var(--whatsapp-text-secondary);
  cursor: pointer;
  min-height: 34px;
  font-size: 1.1rem;
  transition: background 0.2s ease, color 0.2s ease;
  font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif;
}

.emoji-tab:hover {
  background: rgba(84, 101, 255, 0.1);
}

.emoji-tab.active {
  color: var(--whatsapp-green);
  background: rgba(84, 101, 255, 0.16);
}

.emoji-picker-body {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 10px;
  overflow-y: auto;
  max-height: calc(min(360px, 52vh) - 54px);
}

.emoji-section-title {
  font-size: 0.78rem;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  color: var(--whatsapp-text-secondary);
  font-weight: 700;
  padding: 0 4px;
}

.emoji-grid {
  display: grid;
  grid-template-columns: repeat(8, minmax(0, 1fr));
  gap: 4px;
}

.emoji-picker.advanced .emoji-button {
  font-size: 1.4rem;
  border-radius: 10px;
  min-height: 38px;
  font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif;
}

.emoji-empty-state {
  color: var(--whatsapp-text-secondary);
  font-size: 0.86rem;
  text-align: center;
  padding: 14px 8px 16px;
}

@media (max-width: 960px) {
  .emoji-picker.advanced {
    left: 8px;
    right: 8px;
    width: auto;
    max-height: min(320px, 48vh);
  }

  .emoji-picker-body {
    max-height: calc(min(320px, 48vh) - 54px);
  }

  .emoji-grid {
    grid-template-columns: repeat(7, minmax(0, 1fr));
  }
}

/* --- Emoji Mart + WhatsApp-style reactions --- */
.emoji-picker-sheet-wrap {
  position: absolute;
  left: 12px;
  bottom: calc(100% + 8px);
  z-index: 30;
}

.emoji-picker-sheet {
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 14px 36px rgba(0, 0, 0, 0.22);
  animation: emoji-picker-in 0.2s ease;
}

.emoji-picker-loading {
  min-width: 320px;
  min-height: 320px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--whatsapp-bg);
  color: var(--whatsapp-text-secondary);
  font-size: 0.9rem;
}

.message-input-area {
  resize: none;
  line-height: 1.35;
  min-height: 44px;
  max-height: 140px;
  overflow-y: auto;
}

.message-emoji-bar {
  border-radius: 999px;
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.24);
}

.message-emoji-btn {
  font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif;
}

@keyframes emoji-picker-in {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@media (max-width: 960px) {
  .emoji-picker-sheet-wrap {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    padding: 0;
    z-index: 1200;
  }

  .emoji-picker-sheet-wrap::before {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.3);
    z-index: -1;
  }

  .emoji-picker-sheet {
    border-radius: 18px 18px 0 0;
    width: 100%;
    max-height: 56vh;
    animation: emoji-sheet-up 0.22s ease;
  }

  .emoji-picker-loading {
    min-width: 100%;
    min-height: 260px;
  }
}

@keyframes emoji-sheet-up {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

/* --- Emoji Autocomplete + Big Emoji + Reaction polish --- */
.emoji-autocomplete {
  position: absolute;
  z-index: 32;
  min-width: 240px;
  max-width: 300px;
  max-height: 220px;
  overflow-y: auto;
  border-radius: 16px;
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-panel);
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.22);
  padding: 6px;
}

.emoji-autocomplete-item {
  width: 100%;
  border: none;
  background: transparent;
  border-radius: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  cursor: pointer;
  color: var(--whatsapp-text);
  text-align: left;
}

.emoji-autocomplete-item:hover,
.emoji-autocomplete-item.active {
  background: var(--whatsapp-hover);
}

.emoji-autocomplete-preview {
  width: 26px;
  min-width: 26px;
  text-align: center;
  font-size: 1.2rem;
  font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", sans-serif;
}

.emoji-autocomplete-label {
  font-size: 0.84rem;
  color: var(--whatsapp-text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.emoji-custom-preview,
.reaction-custom-image {
  width: 20px;
  height: 20px;
  object-fit: contain;
  display: inline-block;
  vertical-align: middle;
}

.message-text-big-emoji {
  font-size: 2rem;
  line-height: 1.15;
  animation: emoji-bounce-in 0.3s ease;
}

.message-reaction-chip {
  animation: reaction-pop-in 0.18s ease;
}

@keyframes reaction-pop-in {
  from {
    transform: scale(0.82);
    opacity: 0.6;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes emoji-bounce-in {
  0% {
    transform: scale(0.78);
  }
  60% {
    transform: scale(1.12);
  }
  100% {
    transform: scale(1);
  }
}

@media (max-width: 960px) {
  .emoji-autocomplete {
    left: 8px !important;
    right: 8px;
    top: auto !important;
    bottom: calc(100% + 8px);
    min-width: auto;
    max-width: none;
  }
}

/* --- Landing / Title Page --- */
.landing-page {
  min-height: 100vh;
  padding: 24px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.landing-bg {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 10% 10%, rgba(160, 196, 255, 0.35), transparent 42%),
    radial-gradient(circle at 88% 86%, rgba(255, 202, 212, 0.3), transparent 40%),
    linear-gradient(130deg, #e6e9ff, #f3e7ff);
}

.landing-card {
  position: relative;
  z-index: 1;
  width: min(920px, 100%);
  border-radius: 28px;
  border: 1px solid rgba(130, 146, 201, 0.3);
  background: linear-gradient(145deg, rgba(245, 248, 255, 0.95), rgba(238, 243, 255, 0.92));
  box-shadow: 8px 8px 16px rgba(0, 0, 0, 0.08), -8px -8px 16px rgba(255, 255, 255, 0.6);
  padding: 34px;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.landing-main-name {
  font-size: clamp(2.6rem, 6vw, 5rem);
  font-weight: 800;
  letter-spacing: 0.01em;
  color: #1e2b63;
  margin-bottom: 10px;
  line-height: 1.02;
}

.landing-tagline {
  font-size: clamp(1.05rem, 2.4vw, 1.9rem);
  font-weight: 700;
  color: #22305f;
  margin-bottom: 12px;
  line-height: 1.2;
}

.landing-subtitle {
  color: #5e6a93;
  font-size: 1rem;
  line-height: 1.5;
  margin-bottom: 22px;
  max-width: 760px;
}

.landing-features {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
  margin-bottom: 26px;
}

.landing-feature-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  border-radius: 16px;
  border: 1px solid rgba(130, 146, 201, 0.24);
  background: rgba(255, 255, 255, 0.48);
  padding: 12px;
  color: #2f3d75;
  font-size: 0.94rem;
}

.landing-feature-dot {
  width: 8px;
  height: 8px;
  margin-top: 6px;
  border-radius: 50%;
  background: #5465ff;
  flex-shrink: 0;
}

.landing-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: center;
}

.landing-btn {
  border-radius: 999px;
  padding: 11px 18px;
  text-decoration: none;
  font-weight: 700;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.landing-btn.primary {
  color: #fff;
  background: linear-gradient(145deg, #6276ff, #4d63ee);
  box-shadow: 0 8px 18px rgba(84, 101, 255, 0.34);
}

.landing-btn.secondary {
  color: #2f3d75;
  border: 1px solid rgba(130, 146, 201, 0.35);
  background: rgba(255, 255, 255, 0.76);
}

.landing-btn:hover {
  transform: translateY(-1px);
}

:root.theme-dark .landing-bg {
  background:
    radial-gradient(circle at 10% 10%, rgba(113, 140, 255, 0.22), transparent 42%),
    radial-gradient(circle at 88% 86%, rgba(84, 101, 255, 0.2), transparent 42%),
    linear-gradient(140deg, #0c1332, #131f49);
}

:root.theme-dark .landing-card {
  border-color: rgba(140, 160, 245, 0.24);
  background: linear-gradient(145deg, rgba(24, 35, 78, 0.92), rgba(17, 26, 62, 0.92));
}

:root.theme-dark .landing-main-name,
:root.theme-dark .landing-tagline,
:root.theme-dark .landing-feature-item,
:root.theme-dark .landing-btn.secondary {
  color: #eaf0ff;
}

:root.theme-dark .landing-subtitle {
  color: #b5c2e7;
}

:root.theme-dark .landing-feature-item {
  border-color: rgba(140, 160, 245, 0.2);
  background: rgba(255, 255, 255, 0.04);
}

:root.theme-dark .landing-btn.secondary {
  border-color: rgba(140, 160, 245, 0.34);
  background: rgba(255, 255, 255, 0.06);
}

@media (max-width: 800px) {
  .landing-card {
    padding: 24px 18px;
  }

  .landing-features {
    grid-template-columns: 1fr;
  }
}

.call-overlay-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(8, 12, 28, 0.62);
  z-index: 1200;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.call-incoming-modal,
.call-active-panel {
  width: min(760px, 100%);
  border-radius: 16px;
  border: 1px solid var(--whatsapp-border);
  background: var(--whatsapp-panel);
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.32);
  color: var(--whatsapp-text);
}

.call-incoming-modal {
  max-width: 420px;
  padding: 22px;
}

.call-incoming-modal h3 {
  margin: 0 0 8px;
}

.call-incoming-modal p {
  margin: 0 0 16px;
  color: var(--whatsapp-text-secondary);
}

.call-incoming-actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

.call-active-panel {
  padding: 14px;
}

.call-topbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.call-title {
  font-weight: 700;
}

.call-status-pill {
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 0.82rem;
  text-transform: capitalize;
  background: var(--whatsapp-bg-soft);
  border: 1px solid var(--whatsapp-border);
}

.call-status-pill.accepted {
  color: #16a34a;
  border-color: rgba(22, 163, 74, 0.34);
}

.call-status-pill.calling,
.call-status-pill.incoming {
  color: #2563eb;
  border-color: rgba(37, 99, 235, 0.34);
}

.call-media-grid.video {
  position: relative;
  border-radius: 14px;
  overflow: hidden;
  background: #0d142f;
  min-height: 320px;
}

.call-remote-video-wrap,
.call-remote-video {
  width: 100%;
  height: 100%;
}

.call-remote-video {
  object-fit: cover;
  display: block;
  min-height: 320px;
}

.call-local-video-wrap {
  position: absolute;
  right: 12px;
  bottom: 12px;
  width: 180px;
  height: 120px;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: #0f1c3d;
}

.call-local-video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.call-video-placeholder {
  width: 100%;
  height: 100%;
  min-height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #c7d2fe;
  background: linear-gradient(140deg, #1e2f5e, #112247);
}

.call-media-grid.voice {
  min-height: 280px;
  border-radius: 14px;
  background: linear-gradient(145deg, #12244f, #0d1a3d);
  display: flex;
  align-items: center;
  justify-content: center;
}

.call-voice-peer {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.call-voice-avatar {
  width: 96px;
  height: 96px;
  border-radius: 50%;
  border: 1px solid rgba(255, 255, 255, 0.25);
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-size: 2rem;
  font-weight: 700;
  background: rgba(255, 255, 255, 0.08);
}

.call-speaking-indicator {
  font-size: 0.9rem;
  color: #bfd3ff;
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid rgba(191, 211, 255, 0.24);
}

.call-speaking-indicator.active {
  color: #d1fae5;
  border-color: rgba(16, 185, 129, 0.56);
  box-shadow: 0 0 0 8px rgba(16, 185, 129, 0.12);
}

.call-controls {
  margin-top: 12px;
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  flex-wrap: wrap;
}

.call-error {
  margin-top: 10px;
}

@media (max-width: 720px) {
  .call-local-video-wrap {
    width: 132px;
    height: 92px;
  }
}

.sidebar-shell .sidebar-calls-view {
  padding: 0 12px 14px;
}

.sidebar-shell .calls-search {
  padding: 0 2px 10px;
}

.sidebar-shell .calls-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.sidebar-shell .call-row {
  display: flex;
  align-items: center;
  gap: 8px;
  border-radius: 12px;
  border: 1px solid rgba(98, 118, 255, 0.18);
  background: rgba(16, 24, 38, 0.68);
  padding: 8px;
}

.sidebar-shell .call-contact-btn {
  flex: 1;
  min-width: 0;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  border: none;
  background: transparent;
  color: inherit;
  cursor: pointer;
  text-align: left;
}

.sidebar-shell .call-avatar {
  width: 42px;
  height: 42px;
  border-radius: 999px;
  overflow: hidden;
  background: #2b3c66;
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
}

.sidebar-shell .call-meta {
  min-width: 0;
  display: flex;
  flex-direction: column;
}

.sidebar-shell .call-name {
  font-weight: 600;
  color: #eef3ff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sidebar-shell .call-username {
  font-size: 0.78rem;
  color: #9aa7c8;
}

.sidebar-shell .call-actions {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.sidebar-shell .call-action-btn {
  width: 34px;
  height: 34px;
  border-radius: 10px;
  border: 1px solid rgba(104, 130, 255, 0.3);
  background: rgba(49, 74, 166, 0.18);
  color: #d9e5ff;
  cursor: pointer;
}

.sidebar-shell .call-action-btn:hover {
  border-color: #28d76d;
  color: #effff5;
}

/* --- WhatsApp-like Responsive Tune-up --- */
.chat-create-icon {
  display: none;
  font-size: 1rem;
  line-height: 1;
  font-weight: 700;
}

.chat-create-label {
  display: inline;
}

@supports (height: 100dvh) {
  .chat-app,
  .sidebar,
  .main-content,
  .chat-container {
    min-height: 100dvh;
  }

  .chat-app {
    height: 100dvh;
  }
}

@media (max-width: 960px) {
  .chat-app.mobile {
    min-height: 100dvh;
    height: 100dvh;
    overflow: hidden;
    padding-bottom: env(safe-area-inset-bottom);
  }

  .chat-app.mobile .sidebar.sidebar-shell {
    width: 100%;
    max-width: 100%;
    height: 100%;
    border-right: none;
    border-radius: 0;
  }

  .chat-app.mobile .sidebar-shell .sidebar-rail {
    width: 58px;
    padding-top: calc(10px + env(safe-area-inset-top));
    padding-bottom: calc(10px + env(safe-area-inset-bottom));
  }

  .chat-app.mobile .sidebar-shell .sidebar-panel {
    border-radius: 0;
  }

  .chat-app.mobile .chat-list-header.modern {
    padding-top: calc(14px + env(safe-area-inset-top));
  }

  .chat-app.mobile .chat-list-container.modern .chat-list-header h2 {
    font-size: clamp(1.45rem, 6vw, 1.9rem);
  }

  .chat-app.mobile .chat-header-create-btn {
    padding: 8px 12px;
    font-size: 0.84rem;
    white-space: nowrap;
  }

  .chat-app.mobile .chat-header {
    padding: calc(8px + env(safe-area-inset-top)) 10px 8px;
    gap: 8px;
  }

  .chat-app.mobile .chat-header-info {
    gap: 8px;
    min-width: 0;
  }

  .chat-app.mobile .chat-header-avatar {
    width: 36px;
    height: 36px;
    font-size: 0.92rem;
  }

  .chat-app.mobile .chat-header-title {
    font-size: 0.94rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .chat-app.mobile .chat-header-subtitle {
    font-size: 0.75rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 38vw;
  }

  .chat-app.mobile .chat-header-actions {
    gap: 6px;
    flex-shrink: 0;
  }

  .chat-app.mobile .header-action-btn {
    width: 32px;
    height: 32px;
    border-radius: 9px;
  }

  .chat-app.mobile .message-list {
    padding: 10px 10px 6px;
  }

  .chat-app.mobile .message-bubble {
    max-width: 86%;
  }

  .chat-app.mobile .message-composer {
    padding: 8px 8px calc(8px + env(safe-area-inset-bottom));
    gap: 6px;
  }

  .chat-app.mobile .composer-actions {
    gap: 6px;
  }

  .chat-app.mobile .action-button,
  .chat-app.mobile .send-button {
    width: 34px;
    height: 34px;
    font-size: 0.96rem;
    border-radius: 10px;
  }

  .chat-app.mobile .message-input {
    min-height: 40px;
    padding: 10px 12px;
    font-size: 0.9rem;
  }

  .chat-app.mobile .replying-banner,
  .chat-app.mobile .upload-preview {
    left: 8px;
    right: 8px;
  }

  .chat-app.mobile .sidebar-shell .chat-item,
  .chat-app.mobile .sidebar-shell .user-item,
  .chat-app.mobile .sidebar-shell .request-item {
    padding: 10px 12px;
  }

  .chat-app.mobile .sidebar-shell .chat-avatar {
    width: 42px;
    min-width: 42px;
    height: 42px;
  }
}

@media (max-width: 640px) {
  .chat-app.mobile .sidebar-shell .sidebar-rail {
    width: 52px;
    padding-left: 4px;
    padding-right: 4px;
  }

  .chat-app.mobile .sidebar-shell .rail-btn,
  .chat-app.mobile .sidebar-shell .rail-profile-btn {
    width: 36px;
    height: 36px;
    border-radius: 10px;
  }

  .chat-app.mobile .sidebar-shell .rail-profile-avatar {
    width: 30px;
    height: 30px;
  }

  .chat-app.mobile .chat-header-create-btn {
    min-width: 40px;
    padding: 8px 10px;
  }

  .chat-app.mobile .chat-create-label {
    display: none;
  }

  .chat-app.mobile .chat-create-icon {
    display: inline;
  }

  .chat-app.mobile .call-active-panel {
    width: 100%;
    max-height: calc(100dvh - 20px);
    overflow: auto;
  }

  .chat-app.mobile .call-controls {
    justify-content: stretch;
  }

  .chat-app.mobile .call-controls .btn-secondary,
  .chat-app.mobile .call-controls .btn-primary {
    flex: 1 1 calc(50% - 6px);
  }
}

